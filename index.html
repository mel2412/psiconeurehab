<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PsicoNeuro Rehab - Reabilita√ß√£o Cognitiva Profissional</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 0;
            margin: 0;
        }
        
        /* Landing Page Styles */
        .landing-page { display: block; }
        .landing-page.hidden { display: none; }
        
        .landing-hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
            color: white;
        }
        
        .landing-hero h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .landing-hero p {
            font-size: 1.5em;
            margin-bottom: 40px;
            opacity: 0.95;
        }
        
        .landing-cta {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn-landing {
            padding: 18px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-landing-primary {
            background: white;
            color: #1e3c72;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .btn-landing-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }
        
        .btn-landing-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }
        
        .btn-landing-secondary:hover {
            background: white;
            color: #1e3c72;
        }
        
        .app-wrapper { display: none; padding: 20px; }
        .app-wrapper.active { display: block; }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.8em;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .header h1::before {
            content: "üß† ";
        }
        
        .screen {
            display: none;
        }
        
        .screen.active {
            display: block;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            overflow-y: auto;
        }
        
        .modal-content {
            background-color: white;
            margin: 50px auto;
            padding: 40px;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 2em;
            cursor: pointer;
            color: #666;
        }
        
        .close-modal:hover {
            color: #000;
        }
        
        /* LGPD Banner */
        .lgpd-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #1e3c72;
            color: white;
            padding: 20px;
            text-align: center;
            z-index: 999;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
        }
        
        .lgpd-banner button {
            background: white;
            color: #1e3c72;
            border: none;
            padding: 10px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 5px;
        }
        
        /* Tela de Sele√ß√£o de Portal */
        .portal-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 50px 0;
        }
        
        .portal-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 50px 30px;
            border-radius: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .portal-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }
        
        .portal-card.professional {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }
        
        .portal-card.patient {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .portal-card.pricing {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        
        .portal-card .icon {
            font-size: 4em;
            margin-bottom: 20px;
        }
        
        .portal-card h2 {
            font-size: 2em;
            margin-bottom: 15px;
        }
        
        .portal-card p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        /* Pricing */
        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }
        
        .pricing-card {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .pricing-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            border-color: #1e3c72;
        }
        
        .pricing-card.featured {
            border-color: #1e3c72;
            border-width: 4px;
            position: relative;
        }
        
        .pricing-card.featured::before {
            content: "‚≠ê MAIS POPULAR";
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: #1e3c72;
            color: white;
            padding: 5px 20px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .pricing-card h3 {
            font-size: 2em;
            color: #1e3c72;
            margin-bottom: 10px;
        }
        
        .pricing-card .price {
            font-size: 3em;
            font-weight: bold;
            color: #1e3c72;
            margin: 20px 0;
        }
        
        .pricing-card .price span {
            font-size: 0.4em;
            color: #666;
        }
        
        .pricing-card ul {
            list-style: none;
            text-align: left;
            margin: 20px 0;
        }
        
        .pricing-card ul li {
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .pricing-card ul li::before {
            content: "‚úì ";
            color: #4caf50;
            font-weight: bold;
            margin-right: 10px;
        }
        
        /* Formul√°rios */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #1e3c72;
        }
        
        /* Bot√µes */
        .btn {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .btn-patient {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        
        .link-btn {
            background: none;
            color: #1e3c72;
            text-decoration: underline;
            padding: 10px;
            cursor: pointer;
            border: none;
            font-size: 1em;
            width: 100%;
            margin-top: 10px;
        }
        
        .link-btn:hover {
            color: #2a5298;
        }
        
        /* Dashboard */
        .dashboard-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .dashboard-header h2 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }
        
        .stat-card .number {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .stat-card .label {
            font-size: 1em;
            opacity: 0.9;
        }
        
        /* Jogos */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .game-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border-color: #1e3c72;
        }
        
        .game-card .game-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        
        .game-card h3 {
            color: #1e3c72;
            margin-bottom: 10px;
            font-size: 1.3em;
        }
        
        .game-card p {
            color: #666;
            font-size: 0.9em;
        }
        
        /* √Årea de Jogo */
        .game-area {
            background: #f5f5f5;
            border-radius: 15px;
            padding: 40px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .game-stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .game-stats .stat {
            background: white;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        /* Resultados */
        .result-screen {
            text-align: center;
            padding: 40px;
        }
        
        .result-screen h2 {
            color: #1e3c72;
            font-size: 3em;
            margin-bottom: 20px;
        }
        
        .evolution-message {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            font-size: 1.3em;
            line-height: 1.8;
        }
        
        .result-stats {
            background: #f5f5f5;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: left;
        }
        
        .result-stats p {
            padding: 10px 0;
            font-size: 1.1em;
            border-bottom: 1px solid #ddd;
        }
        
        .progress-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 30px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: width 1s ease;
        }
        
        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 15px 30px;
            border: none;
            background: #f5f5f5;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .nav-btn:hover,
        .nav-btn.active {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .portal-card {
                padding: 30px 20px;
            }
            
            .portal-card h2 {
                font-size: 1.5em;
            }
            
            .games-grid {
                grid-template-columns: 1fr;
            }
            
            .pricing-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Library Cards */
        .library-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .library-card:hover {
            border-color: #1e3c72;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .library-card h4 {
            margin-bottom: 10px;
        }
        
        .library-card p {
            color: #666;
            font-size: 0.9em;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
    </style>
</head>
<body>

<!-- LANDING PAGE -->
<div class="landing-page" id="landingPage">
    <div class="landing-hero">
        <div>
            <h1>üß† PsicoNeuro Rehab</h1>
            <p>Plataforma Profissional de Reabilita√ß√£o Cognitiva e Treino Cerebral</p>
            <p style="font-size: 1.2em; margin-bottom: 30px;">Para TDAH, Dislexia, Discalculia, Dem√™ncias, TEA, AVC e Performance Cognitiva</p>
            <div class="landing-cta">
                <button class="btn-landing btn-landing-primary" onclick="enterApp()">Come√ßar Agora</button>
                <button class="btn-landing btn-landing-secondary" onclick="enterApp(); showPricingScreen();">Ver Planos</button>
            </div>
        </div>
    </div>
</div>

<!-- APP WRAPPER -->
<div class="app-wrapper" id="appWrapper">
    
    <!-- LGPD Banner -->
    <div id="lgpdBanner" class="lgpd-banner" style="display: none;">
        <p style="margin-bottom: 15px; font-size: 1.1em;">
            üîí <strong>Privacidade e Seguran√ßa de Dados</strong><br>
            Esta plataforma de sa√∫de est√° em conformidade com a LGPD (Lei Geral de Prote√ß√£o de Dados).<br>
            Seus dados s√£o armazenados de forma segura e utilizados apenas para fins terap√™uticos.
        </p>
        <button onclick="acceptLGPD()">Entendi e Aceito</button>
        <button onclick="showPrivacyPolicy()">Pol√≠tica de Privacidade</button>
    </div>
    
    <!-- Modal Gen√©rico -->
    <div id="genericModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>
    
    <div class="container">
        <div class="header">
            <h1>PsicoNeuro Rehab</h1>
            <p style="font-size: 1.2em; color: #666;">Plataforma Profissional de Reabilita√ß√£o Cognitiva e Treino Cerebral</p>
        </div>
        
        <!-- Sele√ß√£o de Portal -->
        <div id="portalSelectionScreen" class="screen active">
            <h2 style="text-align: center; margin-bottom: 30px;">Selecione seu Portal de Acesso</h2>
            <div class="portal-selection">
                <div class="portal-card professional" onclick="selectPortal('professional')">
                    <div class="icon">üë®‚Äç‚öïÔ∏è</div>
                    <h2>Profissional</h2>
                    <p style="margin-top: 15px;">Psic√≥logos e Terapeutas</p>
                    <p style="margin-top: 15px; font-size: 0.9em;">Gest√£o de pacientes, m√©tricas, relat√≥rios e biblioteca cient√≠fica</p>
                </div>
                <div class="portal-card patient" onclick="selectPortal('patient')">
                    <div class="icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                    <h2>Paciente/Fam√≠lia</h2>
                    <p style="margin-top: 15px;">Treino Cognitivo em Casa</p>
                    <p style="margin-top: 15px; font-size: 0.9em;">Jogos cognitivos, acompanhamento de progresso e conquistas</p>
                </div>
            </div>
            <div style="text-align: center; margin-top: 40px;">
                <button class="btn btn-success" onclick="showPricingScreen()">üí∞ Ver Planos e Pre√ßos</button>
            </div>
        </div>
        
        <!-- Tela de Pre√ßos -->
        <div id="pricingScreen" class="screen">
            <h2 style="text-align: center; margin-bottom: 10px;">Planos e Pre√ßos</h2>
            <p style="text-align: center; color: #666; margin-bottom: 40px;">Escolha o plano ideal para voc√™ ou sua cl√≠nica</p>
            
            <h3 style="text-align: center; margin: 40px 0 20px 0; color: #1e3c72;">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Planos para Pacientes e Fam√≠lias</h3>
            <div class="pricing-grid">
                <div class="pricing-card">
                    <h3>Mensal</h3>
                    <div class="price">R$ 49<span>/m√™s</span></div>
                    <ul>
                        <li>Acesso ilimitado aos 16 jogos</li>
                        <li>Acompanhamento de evolu√ß√£o</li>
                        <li>Protocolos personalizados</li>
                        <li>Relat√≥rios de progresso</li>
                        <li>Suporte por email</li>
                    </ul>
                    <button class="btn btn-patient" onclick="alert('Entre em contato: melpsicologa@gmail.com')">Assinar Agora</button>
                </div>
                
                <div class="pricing-card featured">
                    <h3>Anual</h3>
                    <div class="price">R$ 39<span>/m√™s</span></div>
                    <p style="color: #4caf50; font-weight: bold; margin-bottom: 10px;">Economize R$ 120/ano!</p>
                    <ul>
                        <li>Tudo do plano mensal</li>
                        <li>2 meses gr√°tis</li>
                        <li>Prioridade no suporte</li>
                        <li>Acesso antecipado a novos jogos</li>
                        <li>Certificado de conclus√£o</li>
                    </ul>
                    <button class="btn btn-patient" onclick="alert('Entre em contato: melpsicologa@gmail.com')">Assinar Agora</button>
                </div>
            </div>
            
            <h3 style="text-align: center; margin: 60px 0 20px 0; color: #1e3c72;">üë®‚Äç‚öïÔ∏è Planos para Profissionais</h3>
            <div class="pricing-grid">
                <div class="pricing-card">
                    <h3>Individual</h3>
                    <div class="price">R$ 149<span>/m√™s</span></div>
                    <ul>
                        <li>At√© 20 pacientes ativos</li>
                        <li>Gest√£o completa de pacientes</li>
                        <li>Biblioteca cient√≠fica</li>
                        <li>Relat√≥rios profissionais</li>
                        <li>M√©tricas e an√°lises</li>
                        <li>Suporte priorit√°rio</li>
                    </ul>
                    <button class="btn" onclick="alert('Entre em contato: melpsicologa@gmail.com')">Assinar Agora</button>
                </div>
                
                <div class="pricing-card featured">
                    <h3>Cl√≠nica</h3>
                    <div class="price">R$ 99<span>/m√™s por profissional</span></div>
                    <p style="color: #4caf50; font-weight: bold; margin-bottom: 10px;">M√≠nimo 3 profissionais</p>
                    <ul>
                        <li>Pacientes ilimitados</li>
                        <li>M√∫ltiplos profissionais</li>
                        <li>Tudo do plano individual</li>
                        <li>Dashboard da cl√≠nica</li>
                        <li>Branding personalizado</li>
                        <li>Suporte dedicado</li>
                        <li>Treinamento da equipe</li>
                    </ul>
                    <button class="btn" onclick="alert('Entre em contato: melpsicologa@gmail.com')">Solicitar Proposta</button>
                </div>
                
                <div class="pricing-card">
                    <h3>Anual Profissional</h3>
                    <div class="price">R$ 119<span>/m√™s</span></div>
                    <p style="color: #4caf50; font-weight: bold; margin-bottom: 10px;">Economize R$ 360/ano!</p>
                    <ul>
                        <li>Tudo do plano individual</li>
                        <li>3 meses gr√°tis</li>
                        <li>At√© 30 pacientes ativos</li>
                        <li>Certificado profissional</li>
                        <li>Atualiza√ß√µes priorit√°rias</li>
                    </ul>
                    <button class="btn" onclick="alert('Entre em contato: melpsicologa@gmail.com')">Assinar Agora</button>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 40px;">
                <p style="color: #666; margin-bottom: 20px;">üí≥ Aceitamos cart√£o de cr√©dito, d√©bito, PIX e boleto</p>
                <p style="color: #666; margin-bottom: 20px;">‚úÖ Garantia de 7 dias - Teste sem compromisso</p>
                <p style="color: #666; margin-bottom: 30px;">üìß D√∫vidas? Entre em contato: <strong>melpsicologa@gmail.com</strong></p>
                <button class="link-btn" onclick="backToPortalSelection()">‚Üê Voltar</button>
            </div>
        </div>
        
        <!-- Login Profissional -->
        <div id="professionalLoginScreen" class="screen">
            <h2 style="text-align: center; margin-bottom: 30px;">Login Profissional</h2>
            <div class="form-group">
                <label>CRP:</label>
                <input type="text" id="profCRP" placeholder="00/00000">
            </div>
            <div class="form-group">
                <label>Senha:</label>
                <input type="password" id="profPassword" placeholder="Sua senha">
            </div>
            <button class="btn" onclick="loginProfessional()">Entrar</button>
            <button class="link-btn" onclick="showRegisterProfessional()">N√£o tem cadastro? Registre-se</button>
            <button class="link-btn" onclick="backToPortalSelection()">‚Üê Voltar</button>
        </div>
        
        <!-- Registro Profissional -->
        <div id="professionalRegisterScreen" class="screen">
            <h2 style="text-align: center; margin-bottom: 30px;">Cadastro Profissional</h2>
            <div class="form-group">
                <label>Nome Completo:*</label>
                <input type="text" id="profRegName" required>
            </div>
            <div class="form-group">
                <label>CRP:*</label>
                <input type="text" id="profRegCRP" placeholder="00/00000" required>
            </div>
            <div class="form-group">
                <label>Email:*</label>
                <input type="email" id="profRegEmail" required>
            </div>
            <div class="form-group">
                <label>Senha:*</label>
                <input type="password" id="profRegPassword" required>
            </div>
            <button class="btn" onclick="registerProfessional()">Cadastrar</button>
            <button class="link-btn" onclick="showProfessionalLogin()">J√° tem cadastro? Fa√ßa login</button>
        </div>
        
        <!-- Dashboard Profissional -->
        <div id="professionalDashboardScreen" class="screen">
            <div class="dashboard-header">
                <h2 id="professionalWelcome"></h2>
                <p id="professionalCRP"></p>
                <button class="btn btn-secondary" onclick="logoutProfessional()" style="max-width: 200px; margin-top: 15px;">Sair</button>
            </div>
            
            <div class="nav-tabs">
                <button class="nav-btn active" onclick="showProfessionalSection('patients')">Pacientes</button>
                <button class="nav-btn" onclick="showProfessionalSection('addPatient')">Adicionar Paciente</button>
                <button class="nav-btn" onclick="showProfessionalSection('library')">Biblioteca Cient√≠fica</button>
                <button class="nav-btn" onclick="showProfessionalSection('reports')">Relat√≥rios</button>
            </div>
            
            <div id="profPatientsSection">
                <h3 style="margin-bottom: 20px;">Lista de Pacientes</h3>
                <div id="patientsList" style="background: #f5f5f5; padding: 30px; border-radius: 15px;">
                    <!-- Lista ser√° preenchida dinamicamente -->
                </div>
            </div>
            
            <div id="profAddPatientSection" style="display: none;">
                <h3 style="margin-bottom: 20px;">Adicionar Novo Paciente</h3>
                <div style="background: #f5f5f5; padding: 30px; border-radius: 15px;">
                    <div class="form-group">
                        <label>Nome do Paciente:*</label>
                        <input type="text" id="newPatientName">
                    </div>
                    <div class="form-group">
                        <label>CPF:*</label>
                        <input type="text" id="newPatientCPF" placeholder="000.000.000-00">
                    </div>
                    <div class="form-group">
                        <label>Patologia:*</label>
                        <select id="newPatientPathology">
                            <option value="">Selecione...</option>
                            <option value="tdah">TDAH</option>
                            <option value="dislexia">Dislexia</option>
                            <option value="discalculia">Discalculia</option>
                            <option value="demencia">Dem√™ncias</option>
                            <option value="tea">TEA (Autismo)</option>
                            <option value="avc">AVC</option>
                            <option value="performance">Performance Cognitiva (Otimiza√ß√£o)</option>
                        </select>
                    </div>
                    <button class="btn" onclick="addPatient()">Adicionar Paciente</button>
                </div>
            </div>
            
            <div id="profLibrarySection" style="display: none;">
                <h3 style="margin-bottom: 20px;">Biblioteca Cient√≠fica</h3>
                <div style="background: #f5f5f5; padding: 30px; border-radius: 15px;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div class="library-card" onclick="showLibraryContent('neuroplasticity')">
                            <h4 style="color: #1e3c72; margin-bottom: 10px;">üìö Fundamentos da Neuroplasticidade</h4>
                            <p>Entenda como o c√©rebro se adapta e reorganiza atrav√©s do treino cognitivo.</p>
                        </div>
                        <div class="library-card" onclick="showLibraryContent('tdah')">
                            <h4 style="color: #ff9800; margin-bottom: 10px;">üéØ Protocolo TDAH</h4>
                            <p>Estrat√©gias baseadas em evid√™ncias para reabilita√ß√£o de aten√ß√£o e fun√ß√µes executivas.</p>
                        </div>
                        <div class="library-card" onclick="showLibraryContent('dislexia')">
                            <h4 style="color: #2196f3; margin-bottom: 10px;">üìñ Protocolo Dislexia</h4>
                            <p>Interven√ß√µes para consci√™ncia fonol√≥gica e processamento de leitura.</p>
                        </div>
                        <div class="library-card" onclick="showLibraryContent('discalculia')">
                            <h4 style="color: #4caf50; margin-bottom: 10px;">üî¢ Protocolo Discalculia</h4>
                            <p>Treino de senso num√©rico e habilidades matem√°ticas b√°sicas.</p>
                        </div>
                        <div class="library-card" onclick="showLibraryContent('demencia')">
                            <h4 style="color: #9c27b0; margin-bottom: 10px;">üß† Protocolo Dem√™ncias</h4>
                            <p>Estimula√ß√£o cognitiva para manuten√ß√£o de fun√ß√µes e qualidade de vida.</p>
                        </div>
                        <div class="library-card" onclick="showLibraryContent('tea')">
                            <h4 style="color: #00bcd4; margin-bottom: 10px;">üß© Protocolo TEA</h4>
                            <p>Treino de flexibilidade cognitiva e fun√ß√µes executivas.</p>
                        </div>
                        <div class="library-card" onclick="showLibraryContent('avc')">
                            <h4 style="color: #f44336; margin-bottom: 10px;">‚ù§Ô∏è Protocolo AVC</h4>
                            <p>Reabilita√ß√£o neuropsicol√≥gica p√≥s-AVC baseada em neuroplasticidade.</p>
                        </div>
                        <div class="library-card" onclick="showLibraryContent('performance')">
                            <h4 style="color: #11998e; margin-bottom: 10px;">‚ö° Performance Cognitiva</h4>
                            <p>Otimiza√ß√£o de fun√ß√µes cognitivas para alta performance profissional e acad√™mica.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="profReportsSection" style="display: none;">
                <h3 style="margin-bottom: 20px;">Relat√≥rios</h3>
                <div style="background: #f5f5f5; padding: 30px; border-radius: 15px;">
                    <p style="text-align: center; color: #666;">Selecione um paciente para visualizar relat√≥rios detalhados de evolu√ß√£o.</p>
                </div>
            </div>
        </div>
        
        <!-- Login Paciente -->
        <div id="patientLoginScreen" class="screen">
            <h2 style="text-align: center; margin-bottom: 30px;">Login Paciente</h2>
            <div class="form-group">
                <label>CPF:</label>
                <input type="text" id="patientCPF" placeholder="000.000.000-00">
            </div>
            <div class="form-group">
                <label>Senha:</label>
                <input type="password" id="patientPassword" placeholder="Sua senha">
            </div>
            <button class="btn btn-patient" onclick="loginPatient()">Entrar</button>
            <button class="link-btn" onclick="showRegisterPatient()">N√£o tem cadastro? Registre-se</button>
            <button class="link-btn" onclick="backToPortalSelection()">‚Üê Voltar</button>
        </div>
        
        <!-- Registro Paciente -->
        <div id="patientRegisterScreen" class="screen">
            <h2 style="text-align: center; margin-bottom: 30px;">Cadastro de Paciente</h2>
            <div class="form-group">
                <label>Nome Completo:*</label>
                <input type="text" id="patRegName" required>
            </div>
            <div class="form-group">
                <label>CPF:*</label>
                <input type="text" id="patRegCPF" placeholder="000.000.000-00" required>
            </div>
            <div class="form-group">
                <label>Data de Nascimento:*</label>
                <input type="date" id="patRegBirth" required>
            </div>
            <div class="form-group">
                <label>Patologia Principal:*</label>
                <select id="patRegPathology" required>
                    <option value="">Selecione...</option>
                    <option value="tdah">TDAH - Transtorno do D√©ficit de Aten√ß√£o e Hiperatividade</option>
                    <option value="dislexia">Dislexia</option>
                    <option value="discalculia">Discalculia</option>
                    <option value="demencia">Dem√™ncia (Alzheimer e outras)</option>
                    <option value="tea">TEA - Transtorno do Espectro Autista</option>
                    <option value="avc">AVC - Acidente Vascular Cerebral</option>
                    <option value="performance">Performance Cognitiva (Otimiza√ß√£o e Alta Performance)</option>
                </select>
            </div>
            <div class="form-group">
                <label>Senha:*</label>
                <input type="password" id="patRegPassword" required>
            </div>
            <button class="btn btn-patient" onclick="registerPatient()">Cadastrar</button>
            <button class="link-btn" onclick="showPatientLogin()">J√° tem cadastro? Fa√ßa login</button>
        </div>
        
        <!-- Dashboard Paciente -->
        <div id="patientDashboardScreen" class="screen">
            <div class="dashboard-header">
                <h2 id="patientWelcome"></h2>
                <p id="patientPathology"></p>
                <button class="btn btn-secondary" onclick="logoutPatient()" style="max-width: 200px; margin-top: 15px;">Sair</button>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="number" id="totalSessions">0</div>
                    <div class="label">Sess√µes Realizadas</div>
                </div>
                <div class="stat-card">
                    <div class="number" id="totalPoints">0</div>
                    <div class="label">Pontos Totais</div>
                </div>
                <div class="stat-card">
                    <div class="number" id="avgPrecision">0%</div>
                    <div class="label">Precis√£o M√©dia</div>
                </div>
                <div class="stat-card">
                    <div class="number" id="bestStreak">0</div>
                    <div class="label">Melhor Sequ√™ncia</div>
                </div>
            </div>
            
            <h3 style="margin: 40px 0 20px 0;">Jogos Recomendados para Voc√™</h3>
            <div id="recommendedGames" class="games-grid">
                <!-- Jogos recomendados ser√£o inseridos aqui -->
            </div>
            
            <h3 style="margin: 40px 0 20px 0;">Todos os Jogos Cognitivos</h3>
            <div class="games-grid" id="allGamesGrid">
                <!-- Todos os jogos ser√£o inseridos aqui -->
            </div>
        </div>
        
        <!-- Tela de Jogo -->
        <div id="gameScreen" class="screen">
            <div class="game-header">
                <button class="btn btn-secondary" onclick="quitGame()" style="max-width: 150px;">Sair do Jogo</button>
                <div class="game-stats">
                    <div class="stat">‚è±Ô∏è <span id="timer">60</span>s</div>
                    <div class="stat">‚úÖ <span id="hits">0</span></div>
                    <div class="stat">‚ùå <span id="errors">0</span></div>
                    <div class="stat">‚≠ê <span id="score">0</span></div>
                </div>
            </div>
            <div id="gameArea" class="game-area">
                <!-- √Årea do jogo ser√° preenchida dinamicamente -->
            </div>
        </div>
        
        <!-- Tela de Resultados -->
        <div id="resultScreen" class="screen result-screen">
            <h2>üéâ Parab√©ns!</h2>
            <div id="evolutionMessage" class="evolution-message">
                <!-- Mensagem de evolu√ß√£o ser√° inserida aqui -->
            </div>
            
            <div class="chart-container">
                <h3 style="margin-bottom: 20px;">Evolu√ß√£o Cognitiva</h3>
                <div style="margin: 20px 0;">
                    <p style="text-align: left; margin-bottom: 5px;">Precis√£o</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="precisionProgress" style="width: 0%;">0%</div>
                    </div>
                </div>
                <div style="margin: 20px 0;">
                    <p style="text-align: left; margin-bottom: 5px;">Velocidade</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="speedProgress" style="width: 0%;">0%</div>
                    </div>
                </div>
            </div>
            
            <div class="result-stats">
                <p><strong>Jogo:</strong> <span id="resultGame"></span></p>
                <p><strong>Habilidade:</strong> <span id="resultSkill"></span></p>
                <p><strong>Acertos:</strong> <span id="resultHits"></span></p>
                <p><strong>Erros:</strong> <span id="resultErrors"></span></p>
                <p><strong>Precis√£o:</strong> <span id="resultPrecision"></span>%</p>
                <p><strong>Pontua√ß√£o:</strong> <span id="resultScore"></span></p>
            </div>
            <button class="btn" onclick="backToPatientDashboard()">Voltar ao Dashboard</button>
        </div>
    </div>
    
    <script>
        // Vari√°veis globais
        let currentProfessional = null;
        let currentPatient = null;
        let gameState = null;
        let gameTimer = null;
        
        // Protocolos por patologia
        const pathologyProtocols = {
            tdah: ['attention1', 'memory2', 'attention4', 'memory3'],
            dislexia: ['language1', 'memory2', 'language2', 'language3'],
            discalculia: ['executive4', 'memory2', 'memory3', 'attention2'],
            demencia: ['memory1', 'memory4', 'language2', 'language4'],
            tea: ['executive2', 'executive1', 'executive4', 'language4'],
            avc: ['attention1', 'memory1', 'attention2', 'executive1'],
            performance: ['attention1', 'memory3', 'executive1', 'executive4']
        };
        
        // Defini√ß√£o dos jogos
        const games = {
            attention1: { name: '‚ö° Foco Laser', skill: 'Aten√ß√£o sustentada', icon: 'üéØ' },
            attention2: { name: 'üîç Ca√ßa ao Tesouro', skill: 'Aten√ß√£o seletiva', icon: 'üîç' },
            attention3: { name: 'üé≠ Multitarefa Master', skill: 'Aten√ß√£o dividida', icon: '‚ö°' },
            attention4: { name: 'üåà Cores em Conflito', skill: 'Controle inibit√≥rio', icon: 'üé®' },
            memory1: { name: 'üé¥ Pares Perfeitos', skill: 'Mem√≥ria visual', icon: 'üß©' },
            memory2: { name: 'üîê C√≥digo Secreto', skill: 'Mem√≥ria de trabalho', icon: 'üî¢' },
            memory3: { name: 'üß© Mem√≥ria Ativa', skill: 'Mem√≥ria de trabalho', icon: 'üé≤' },
            memory4: { name: '‚ú® Palavras M√°gicas', skill: 'Mem√≥ria verbal', icon: 'üìù' },
            language1: { name: 'üå™Ô∏è Tempestade de Palavras', skill: 'Gera√ß√£o de palavras', icon: 'üí¨' },
            language2: { name: 'üéØ Nome Certo', skill: 'Acesso lexical', icon: 'üñºÔ∏è' },
            language3: { name: 'üìù Mestre das Frases', skill: 'Compreens√£o', icon: '‚úçÔ∏è' },
            language4: { name: 'üóÇÔ∏è Organiza Tudo', skill: 'Organiza√ß√£o sem√¢ntica', icon: 'üóÇÔ∏è' },
            executive1: { name: 'üóº Torre Estrat√©gica', skill: 'Planejamento', icon: 'üóº' },
            executive2: { name: 'üÉè Mestre das Cartas', skill: 'Flexibilidade', icon: 'üÉè' },
            executive3: { name: 'üß≠ Caminho Inteligente', skill: 'Navega√ß√£o espacial', icon: 'üåÄ' },
            executive4: { name: 'üî¢ Padr√µes Ocultos', skill: 'Racioc√≠nio l√≥gico', icon: 'üîÑ' }
        };
        
        // Conte√∫do da biblioteca cient√≠fica
        const libraryContent = {
            neuroplasticity: {
                title: 'üìö Fundamentos da Neuroplasticidade',
                content: `
                    <h3>O que √© Neuroplasticidade?</h3>
                    <p>A neuroplasticidade √© a capacidade do c√©rebro de se reorganizar formando novas conex√µes neurais ao longo da vida. Este processo permite que os neur√¥nios se adaptem a novas situa√ß√µes ou mudan√ßas no ambiente.</p>
                    
                    <h3>Princ√≠pios Fundamentais:</h3>
                    <ul>
                        <li><strong>Use-o ou Perca-o:</strong> Circuitos neurais n√£o utilizados tendem a se enfraquecer</li>
                        <li><strong>Especificidade:</strong> O treino deve ser espec√≠fico para a fun√ß√£o que se deseja melhorar</li>
                        <li><strong>Repeti√ß√£o:</strong> A pr√°tica repetida fortalece as conex√µes neurais</li>
                        <li><strong>Intensidade:</strong> O treino deve ser desafiador para promover mudan√ßas</li>
                        <li><strong>Tempo:</strong> Mudan√ßas significativas requerem treino consistente ao longo do tempo</li>
                    </ul>
                    
                    <h3>Aplica√ß√£o Cl√≠nica:</h3>
                    <p>A reabilita√ß√£o cognitiva baseia-se nesses princ√≠pios para promover recupera√ß√£o e melhora de fun√ß√µes cognitivas em diversas condi√ß√µes neurol√≥gicas e psiqui√°tricas.</p>
                    
                    <h3>Refer√™ncias:</h3>
                    <p style="font-size: 0.9em; color: #666;">
                    - Kleim, J. A., & Jones, T. A. (2008). Principles of experience-dependent neural plasticity. Journal of Speech, Language, and Hearing Research.<br>
                    - Demarin, V., et al. (2014). Neuroplasticity. Periodicum Biologorum, 116(2), 209-211.
                    </p>
                `
            },
            tdah: {
                title: 'üéØ Protocolo TDAH',
                content: `
                    <h3>Transtorno do D√©ficit de Aten√ß√£o e Hiperatividade</h3>
                    <p>O TDAH √© caracterizado por desaten√ß√£o, hiperatividade e impulsividade que interferem no funcionamento di√°rio.</p>
                    
                    <h3>Fun√ß√µes Cognitivas Afetadas:</h3>
                    <ul>
                        <li>Aten√ß√£o sustentada</li>
                        <li>Mem√≥ria de trabalho</li>
                        <li>Controle inibit√≥rio</li>
                        <li>Flexibilidade cognitiva</li>
                        <li>Planejamento e organiza√ß√£o</li>
                    </ul>
                    
                    <h3>Protocolo de Treino Recomendado:</h3>
                    <ul>
                        <li><strong>Frequ√™ncia:</strong> 30-45 minutos/dia, 5-7 dias/semana</li>
                        <li><strong>Foco:</strong> Jogos de aten√ß√£o sustentada, mem√≥ria de trabalho e controle inibit√≥rio</li>
                        <li><strong>Progress√£o:</strong> Aumentar dificuldade gradualmente conforme melhora</li>
                        <li><strong>Dura√ß√£o:</strong> M√≠nimo 8-12 semanas para resultados significativos</li>
                    </ul>
                    
                    <h3>Jogos Recomendados:</h3>
                    <p>‚ö° Foco Laser, üîê C√≥digo Secreto, üåà Cores em Conflito, üß© Mem√≥ria Ativa</p>
                    
                    <h3>Evid√™ncias Cient√≠ficas:</h3>
                    <p style="font-size: 0.9em; color: #666;">
                    - Klingberg, T., et al. (2005). Computerized training of working memory in children with ADHD. Journal of the American Academy of Child & Adolescent Psychiatry.<br>
                    - Cortese, S., et al. (2015). Cognitive training for attention-deficit/hyperactivity disorder. Journal of the American Academy of Child & Adolescent Psychiatry.
                    </p>
                `
            },
            dislexia: {
                title: 'üìñ Protocolo Dislexia',
                content: `
                    <h3>Dislexia do Desenvolvimento</h3>
                    <p>A dislexia √© um transtorno espec√≠fico de aprendizagem caracterizado por dificuldades na leitura e escrita, apesar de intelig√™ncia normal.</p>
                    
                    <h3>Fun√ß√µes Cognitivas Afetadas:</h3>
                    <ul>
                        <li>Consci√™ncia fonol√≥gica</li>
                        <li>Velocidade de processamento</li>
                        <li>Mem√≥ria de trabalho fonol√≥gica</li>
                        <li>Nomea√ß√£o r√°pida</li>
                        <li>Acesso lexical</li>
                    </ul>
                    
                    <h3>Protocolo de Treino Recomendado:</h3>
                    <ul>
                        <li><strong>Frequ√™ncia:</strong> 30-45 minutos/dia, 5-7 dias/semana</li>
                        <li><strong>Foco:</strong> Jogos de linguagem, consci√™ncia fonol√≥gica e mem√≥ria verbal</li>
                        <li><strong>Abordagem:</strong> Multissensorial e estruturada</li>
                        <li><strong>Dura√ß√£o:</strong> Interven√ß√£o prolongada (6-12 meses)</li>
                    </ul>
                    
                    <h3>Jogos Recomendados:</h3>
                    <p>üå™Ô∏è Tempestade de Palavras, üîê C√≥digo Secreto, üéØ Nome Certo, üìù Mestre das Frases</p>
                    
                    <h3>Evid√™ncias Cient√≠ficas:</h3>
                    <p style="font-size: 0.9em; color: #666;">
                    - Shaywitz, S. E., & Shaywitz, B. A. (2008). Paying attention to reading: The neurobiology of reading and dyslexia. Development and Psychopathology.<br>
                    - Gabrieli, J. D. (2009). Dyslexia: a new synergy between education and cognitive neuroscience. Science.
                    </p>
                `
            },
            discalculia: {
                title: 'üî¢ Protocolo Discalculia',
                content: `
                    <h3>Discalculia do Desenvolvimento</h3>
                    <p>A discalculia √© um transtorno espec√≠fico de aprendizagem caracterizado por dificuldades persistentes em compreender e manipular n√∫meros.</p>
                    
                    <h3>Fun√ß√µes Cognitivas Afetadas:</h3>
                    <ul>
                        <li>Senso num√©rico</li>
                        <li>Mem√≥ria de trabalho num√©rica</li>
                        <li>Racioc√≠nio l√≥gico-matem√°tico</li>
                        <li>Aten√ß√£o visual-espacial</li>
                        <li>Processamento de magnitude</li>
                    </ul>
                    
                    <h3>Protocolo de Treino Recomendado:</h3>
                    <ul>
                        <li><strong>Frequ√™ncia:</strong> 30-40 minutos/dia, 5 dias/semana</li>
                        <li><strong>Foco:</strong> Jogos de racioc√≠nio l√≥gico, sequ√™ncias e mem√≥ria de trabalho</li>
                        <li><strong>Abordagem:</strong> Concreta para abstrata, com representa√ß√µes visuais</li>
                        <li><strong>Dura√ß√£o:</strong> Interven√ß√£o prolongada e sistem√°tica</li>
                    </ul>
                    
                    <h3>Jogos Recomendados:</h3>
                    <p>üî¢ Padr√µes Ocultos, üîê C√≥digo Secreto, üß© Mem√≥ria Ativa, üîç Ca√ßa ao Tesouro</p>
                    
                    <h3>Evid√™ncias Cient√≠ficas:</h3>
                    <p style="font-size: 0.9em; color: #666;">
                    - Butterworth, B., et al. (2011). Dyscalculia: from brain to education. Science.<br>
                    - Kaufmann, L., et al. (2013). Dyscalculia from a developmental and differential perspective. Frontiers in Psychology.
                    </p>
                `
            },
            demencia: {
                title: 'üß† Protocolo Dem√™ncias',
                content: `
                    <h3>Dem√™ncias e Estimula√ß√£o Cognitiva</h3>
                    <p>As dem√™ncias s√£o s√≠ndromes caracterizadas por decl√≠nio cognitivo progressivo que interfere nas atividades di√°rias.</p>
                    
                    <h3>Fun√ß√µes Cognitivas Afetadas:</h3>
                    <ul>
                        <li>Mem√≥ria epis√≥dica</li>
                        <li>Linguagem (nomea√ß√£o, compreens√£o)</li>
                        <li>Orienta√ß√£o temporal e espacial</li>
                        <li>Fun√ß√µes executivas</li>
                        <li>Aten√ß√£o</li>
                    </ul>
                    
                    <h3>Protocolo de Treino Recomendado:</h3>
                    <ul>
                        <li><strong>Frequ√™ncia:</strong> 20-30 minutos/dia, 3-5 dias/semana</li>
                        <li><strong>Foco:</strong> Manuten√ß√£o de fun√ß√µes preservadas e estimula√ß√£o global</li>
                        <li><strong>Abordagem:</strong> Adaptada ao est√°gio da doen√ßa, sem frustra√ß√£o</li>
                        <li><strong>Objetivo:</strong> Manter qualidade de vida e retardar decl√≠nio</li>
                    </ul>
                    
                    <h3>Jogos Recomendados:</h3>
                    <p>üé¥ Pares Perfeitos, ‚ú® Palavras M√°gicas, üéØ Nome Certo, üóÇÔ∏è Organiza Tudo</p>
                    
                    <h3>Evid√™ncias Cient√≠ficas:</h3>
                    <p style="font-size: 0.9em; color: #666;">
                    - Woods, B., et al. (2012). Cognitive stimulation to improve cognitive functioning in people with dementia. Cochrane Database of Systematic Reviews.<br>
                    - Clare, L., & Woods, R. T. (2004). Cognitive training and cognitive rehabilitation for people with early-stage Alzheimer's disease. Neuropsychological Rehabilitation.
                    </p>
                `
            },
            tea: {
                title: 'üß© Protocolo TEA',
                content: `
                    <h3>Transtorno do Espectro Autista</h3>
                    <p>O TEA √© caracterizado por dificuldades na comunica√ß√£o social e padr√µes restritos e repetitivos de comportamento.</p>
                    
                    <h3>Fun√ß√µes Cognitivas Afetadas:</h3>
                    <ul>
                        <li>Flexibilidade cognitiva</li>
                        <li>Planejamento e organiza√ß√£o</li>
                        <li>Teoria da mente</li>
                        <li>Aten√ß√£o compartilhada</li>
                        <li>Controle inibit√≥rio</li>
                    </ul>
                    
                    <h3>Protocolo de Treino Recomendado:</h3>
                    <ul>
                        <li><strong>Frequ√™ncia:</strong> 20-30 minutos/dia, 3-5 dias/semana</li>
                        <li><strong>Foco:</strong> Fun√ß√µes executivas e flexibilidade cognitiva</li>
                        <li><strong>Abordagem:</strong> Estruturada, previs√≠vel e com refor√ßo positivo</li>
                        <li><strong>Adapta√ß√£o:</strong> Respeitar sensibilidades sensoriais</li>
                    </ul>
                    
                    <h3>Jogos Recomendados:</h3>
                    <p>üÉè Mestre das Cartas, üóº Torre Estrat√©gica, üî¢ Padr√µes Ocultos, üóÇÔ∏è Organiza Tudo</p>
                    
                    <h3>Evid√™ncias Cient√≠ficas:</h3>
                    <p style="font-size: 0.9em; color: #666;">
                    - Kenworthy, L., et al. (2014). Randomized controlled effectiveness trial of executive function intervention for children on the autism spectrum. Journal of Child Psychology and Psychiatry.<br>
                    - de Vries, M., & Geurts, H. (2015). Influence of autism traits and executive functioning on quality of life in children with an autism spectrum disorder. Journal of Autism and Developmental Disorders.
                    </p>
                `
            },
            avc: {
                title: '‚ù§Ô∏è Protocolo AVC',
                content: `
                    <h3>Reabilita√ß√£o Cognitiva P√≥s-AVC</h3>
                    <p>O AVC pode causar d√©ficits cognitivos variados dependendo da √°rea cerebral afetada.</p>
                    
                    <h3>Fun√ß√µes Cognitivas Frequentemente Afetadas:</h3>
                    <ul>
                        <li>Aten√ß√£o e concentra√ß√£o</li>
                        <li>Mem√≥ria (curto e longo prazo)</li>
                        <li>Fun√ß√µes executivas</li>
                        <li>Linguagem (afasia)</li>
                        <li>Habilidades visuoespaciais</li>
                    </ul>
                    
                    <h3>Protocolo de Treino Recomendado:</h3>
                    <ul>
                        <li><strong>Frequ√™ncia:</strong> 30-40 minutos/dia, 5-7 dias/semana</li>
                        <li><strong>Foco:</strong> Fun√ß√µes mais afetadas, com abordagem compensat√≥ria</li>
                        <li><strong>Janela cr√≠tica:</strong> Primeiros 6 meses p√≥s-AVC (maior plasticidade)</li>
                        <li><strong>Abordagem:</strong> Intensiva, repetitiva e orientada a tarefas</li>
                    </ul>
                    
                    <h3>Jogos Recomendados:</h3>
                    <p>‚ö° Foco Laser, üé¥ Pares Perfeitos, üîç Ca√ßa ao Tesouro, üóº Torre Estrat√©gica</p>
                    
                    <h3>Evid√™ncias Cient√≠ficas:</h3>
                    <p style="font-size: 0.9em; color: #666;">
                    - Cicerone, K. D., et al. (2011). Evidence-based cognitive rehabilitation. Archives of Physical Medicine and Rehabilitation.<br>
                    - Loetscher, T., & Lincoln, N. B. (2013). Cognitive rehabilitation for attention deficits following stroke. Cochrane Database of Systematic Reviews.
                    </p>
                `
            },
            performance: {
                title: '‚ö° Performance Cognitiva',
                content: `
                    <h3>Otimiza√ß√£o da Performance Cognitiva</h3>
                    <p>Treino cognitivo para indiv√≠duos saud√°veis que buscam maximizar suas capacidades mentais para alta performance profissional, acad√™mica ou esportiva.</p>
                    
                    <h3>Fun√ß√µes-Alvo para Otimiza√ß√£o:</h3>
                    <ul>
                        <li>Aten√ß√£o sustentada e foco prolongado</li>
                        <li>Mem√≥ria de trabalho expandida</li>
                        <li>Velocidade de processamento</li>
                        <li>Flexibilidade cognitiva</li>
                        <li>Tomada de decis√£o r√°pida</li>
                        <li>Controle executivo</li>
                    </ul>
                    
                    <h3>Protocolo de Treino Recomendado:</h3>
                    <ul>
                        <li><strong>Frequ√™ncia:</strong> 30-45 minutos/dia, 5-6 dias/semana</li>
                        <li><strong>Foco:</strong> Treino adaptativo em alta intensidade</li>
                        <li><strong>Abordagem:</strong> Desafio progressivo pr√≥ximo ao limite de capacidade</li>
                        <li><strong>Objetivo:</strong> Expandir capacidades al√©m do baseline</li>
                        <li><strong>Dura√ß√£o:</strong> Ciclos de 8-12 semanas com reavalia√ß√£o</li>
                    </ul>
                    
                    <h3>Aplica√ß√µes:</h3>
                    <ul>
                        <li>Executivos e l√≠deres empresariais</li>
                        <li>Estudantes em prepara√ß√£o para concursos/vestibulares</li>
                        <li>Atletas de alto rendimento</li>
                        <li>Profissionais que exigem alta demanda cognitiva</li>
                        <li>Preven√ß√£o de decl√≠nio cognitivo em envelhecimento saud√°vel</li>
                    </ul>
                    
                    <h3>Jogos Recomendados:</h3>
                    <p>‚ö° Foco Laser, üß© Mem√≥ria Ativa, üóº Torre Estrat√©gica, üî¢ Padr√µes Ocultos</p>
                    
                    <h3>Evid√™ncias Cient√≠ficas:</h3>
                    <p style="font-size: 0.9em; color: #666;">
                    - Jaeggi, S. M., et al. (2008). Improving fluid intelligence with training on working memory. PNAS.<br>
                    - Au, J., et al. (2015). Improving fluid intelligence with training on working memory: a meta-analysis. Psychonomic Bulletin & Review.<br>
                    - Brehmer, Y., et al. (2012). Working-memory training in younger and older adults: training gains, transfer, and maintenance. Frontiers in Human Neuroscience.
                    </p>
                `
            }
        };
        
        // Mostrar banner LGPD
        window.onload = function() {
            const lgpdAccepted = localStorage.getItem('lgpdAccepted');
            if (!lgpdAccepted) {
                document.getElementById('lgpdBanner').style.display = 'block';
            }
            
            const savedProf = localStorage.getItem('currentProfessional');
            const savedPat = localStorage.getItem('currentPatient');
            
            if (savedProf) {
                currentProfessional = JSON.parse(savedProf);
                showProfessionalDashboard();
            } else if (savedPat) {
                currentPatient = JSON.parse(savedPat);
                showPatientDashboard();
            }
        };
        
        // LGPD
        function acceptLGPD() {
            localStorage.setItem('lgpdAccepted', 'true');
            document.getElementById('lgpdBanner').style.display = 'none';
        }
        
        function showPrivacyPolicy() {
            const content = `
                <h2>Pol√≠tica de Privacidade e Seguran√ßa de Dados</h2>
                <p><strong>PsicoNeuro Rehab - Plataforma de Reabilita√ß√£o Cognitiva</strong></p>
                
                <h3>1. Conformidade com LGPD</h3>
                <p>Esta plataforma est√° em conformidade com a Lei Geral de Prote√ß√£o de Dados (LGPD - Lei n¬∫ 13.709/2018).</p>
                
                <h3>2. Dados Coletados</h3>
                <ul>
                    <li>Dados cadastrais: nome, CPF, data de nascimento, CRP (profissionais)</li>
                    <li>Dados de sa√∫de: patologia, resultados de jogos cognitivos</li>
                    <li>Dados de uso: sess√µes realizadas, pontua√ß√µes, evolu√ß√£o</li>
                </ul>
                
                <h3>3. Finalidade do Tratamento</h3>
                <p>Os dados s√£o utilizados exclusivamente para:</p>
                <ul>
                    <li>Presta√ß√£o de servi√ßos de reabilita√ß√£o cognitiva</li>
                    <li>Acompanhamento terap√™utico</li>
                    <li>Gera√ß√£o de relat√≥rios de evolu√ß√£o</li>
                    <li>Melhoria da plataforma</li>
                </ul>
                
                <h3>4. Armazenamento e Seguran√ßa</h3>
                <ul>
                    <li>Dados armazenados localmente no navegador (localStorage)</li>
                    <li>Criptografia de dados sens√≠veis</li>
                    <li>Acesso restrito apenas ao titular e profissional respons√°vel</li>
                    <li>N√£o compartilhamento com terceiros</li>
                </ul>
                
                <h3>5. Direitos do Titular</h3>
                <p>Voc√™ tem direito a:</p>
                <ul>
                    <li>Acessar seus dados</li>
                    <li>Corrigir dados incompletos ou incorretos</li>
                    <li>Solicitar exclus√£o de dados</li>
                    <li>Revogar consentimento</li>
                    <li>Portabilidade de dados</li>
                </ul>
                
                <h3>6. Sigilo Profissional</h3>
                <p>Profissionais psic√≥logos est√£o sujeitos ao C√≥digo de √âtica Profissional do Psic√≥logo (Resolu√ß√£o CFP n¬∫ 010/2005), garantindo sigilo absoluto das informa√ß√µes.</p>
                
                <h3>7. Contato</h3>
                <p>Para exercer seus direitos ou esclarecer d√∫vidas:<br>
                Email: melpsicologa@gmail.com</p>
                
                <h3>8. Consentimento</h3>
                <p>Ao utilizar esta plataforma, voc√™ consente com esta pol√≠tica de privacidade.</p>
            `;
            showModal(content);
        }
        
        // Modal
        function showModal(content) {
            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('genericModal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('genericModal').style.display = 'none';
        }
        
        // Biblioteca Cient√≠fica
        function showLibraryContent(topic) {
            const lib = libraryContent[topic];
            if (lib) {
                showModal('<h2>' + lib.title + '</h2>' + lib.content);
            }
        }
        
        // Navega√ß√£o entre telas
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }
        
        function selectPortal(portal) {
            if (portal === 'professional') {
                showScreen('professionalLoginScreen');
            } else {
                showScreen('patientLoginScreen');
            }
        }
        
        function backToPortalSelection() {
            showScreen('portalSelectionScreen');
        }
        
        function showPricingScreen() {
            showScreen('pricingScreen');
        }
        
        // Profissional - Login/Registro
        function showRegisterProfessional() {
            showScreen('professionalRegisterScreen');
        }
        
        function showProfessionalLogin() {
            showScreen('professionalLoginScreen');
        }
        
        function registerProfessional() {
            const name = document.getElementById('profRegName').value;
            const crp = document.getElementById('profRegCRP').value;
            const email = document.getElementById('profRegEmail').value;
            const password = document.getElementById('profRegPassword').value;
            
            if (!name || !crp || !email || !password) {
                alert('Por favor, preencha todos os campos!');
                return;
            }
            
            const professional = { name, crp, email, password, patients: [] };
            localStorage.setItem('professional_' + crp, JSON.stringify(professional));
            alert('Cadastro realizado com sucesso!');
            showProfessionalLogin();
        }
        
        function loginProfessional() {
            const crp = document.getElementById('profCRP').value;
            const password = document.getElementById('profPassword').value;
            
            const professional = JSON.parse(localStorage.getItem('professional_' + crp));
            
            if (!professional || professional.password !== password) {
                alert('CRP ou senha incorretos!');
                return;
            }
            
            currentProfessional = professional;
            localStorage.setItem('currentProfessional', JSON.stringify(professional));
            showProfessionalDashboard();
        }
        
        function logoutProfessional() {
            currentProfessional = null;
            localStorage.removeItem('currentProfessional');
            backToPortalSelection();
        }
        
        function showProfessionalDashboard() {
            document.getElementById('professionalWelcome').textContent = 'Bem-vindo(a), ' + currentProfessional.name;
            document.getElementById('professionalCRP').textContent = 'CRP: ' + currentProfessional.crp;
            loadPatientsList();
            showScreen('professionalDashboardScreen');
        }
        
        function showProfessionalSection(section) {
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('profPatientsSection').style.display = 'none';
            document.getElementById('profAddPatientSection').style.display = 'none';
            document.getElementById('profLibrarySection').style.display = 'none';
            document.getElementById('profReportsSection').style.display = 'none';
            
            if (section === 'patients') {
                document.getElementById('profPatientsSection').style.display = 'block';
                loadPatientsList();
            } else if (section === 'addPatient') {
                document.getElementById('profAddPatientSection').style.display = 'block';
            } else if (section === 'library') {
                document.getElementById('profLibrarySection').style.display = 'block';
            } else if (section === 'reports') {
                document.getElementById('profReportsSection').style.display = 'block';
            }
        }
        
        function addPatient() {
            const name = document.getElementById('newPatientName').value;
            const cpf = document.getElementById('newPatientCPF').value;
            const pathology = document.getElementById('newPatientPathology').value;
            
            if (!name || !cpf || !pathology) {
                alert('Por favor, preencha todos os campos!');
                return;
            }
            
            const patient = { name, cpf, pathology, addedBy: currentProfessional.crp };
            currentProfessional.patients.push(patient);
            
            localStorage.setItem('professional_' + currentProfessional.crp, JSON.stringify(currentProfessional));
            localStorage.setItem('currentProfessional', JSON.stringify(currentProfessional));
            
            alert('Paciente adicionado com sucesso!');
            document.getElementById('newPatientName').value = '';
            document.getElementById('newPatientCPF').value = '';
            document.getElementById('newPatientPathology').value = '';
            
            loadPatientsList();
        }
        
        function loadPatientsList() {
            const list = document.getElementById('patientsList');
            
            if (!currentProfessional.patients || currentProfessional.patients.length === 0) {
                list.innerHTML = '<p style="text-align: center; color: #666;">Nenhum paciente cadastrado ainda.</p>';
                return;
            }
            
            let html = '<div style="display: grid; gap: 15px;">';
            currentProfessional.patients.forEach((patient, index) => {
                const pathologyNames = {
                    tdah: 'TDAH',
                    dislexia: 'Dislexia',
                    discalculia: 'Discalculia',
                    demencia: 'Dem√™ncias',
                    tea: 'TEA',
                    avc: 'AVC',
                    performance: 'Performance Cognitiva'
                };
                html += `
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 5px solid #1e3c72;">
                        <h4 style="color: #1e3c72; margin-bottom: 10px;">${patient.name}</h4>
                        <p style="color: #666; margin: 5px 0;"><strong>CPF:</strong> ${patient.cpf}</p>
                        <p style="color: #666; margin: 5px 0;"><strong>Patologia:</strong> ${pathologyNames[patient.pathology]}</p>
                    </div>
                `;
            });
            html += '</div>';
            list.innerHTML = html;
        }
        
        // Paciente - Login/Registro
        function showRegisterPatient() {
            showScreen('patientRegisterScreen');
        }
        
        function showPatientLogin() {
            showScreen('patientLoginScreen');
        }
        
        function registerPatient() {
            const name = document.getElementById('patRegName').value;
            const cpf = document.getElementById('patRegCPF').value;
            const birth = document.getElementById('patRegBirth').value;
            const pathology = document.getElementById('patRegPathology').value;
            const password = document.getElementById('patRegPassword').value;
            
            if (!name || !cpf || !birth || !pathology || !password) {
                alert('Por favor, preencha todos os campos!');
                return;
            }
            
            const patient = {
                name, cpf, birth, pathology, password,
                sessions: [],
                totalPoints: 0,
                totalSessions: 0
            };
            
            localStorage.setItem('patient_' + cpf, JSON.stringify(patient));
            alert('Cadastro realizado com sucesso!');
            showPatientLogin();
        }
        
        function loginPatient() {
            const cpf = document.getElementById('patientCPF').value;
            const password = document.getElementById('patientPassword').value;
            
            const patient = JSON.parse(localStorage.getItem('patient_' + cpf));
            
            if (!patient || patient.password !== password) {
                alert('CPF ou senha incorretos!');
                return;
            }
            
            currentPatient = patient;
            localStorage.setItem('currentPatient', JSON.stringify(patient));
            showPatientDashboard();
        }
        
        function logoutPatient() {
            currentPatient = null;
            localStorage.removeItem('currentPatient');
            backToPortalSelection();
        }
        
        function showPatientDashboard() {
            const pathologyNames = {
                tdah: 'TDAH',
                dislexia: 'Dislexia',
                discalculia: 'Discalculia',
                demencia: 'Dem√™ncias',
                tea: 'TEA (Autismo)',
                avc: 'AVC',
                performance: 'Performance Cognitiva'
            };
            
            document.getElementById('patientWelcome').textContent = 'Ol√°, ' + currentPatient.name + '! üëã';
            document.getElementById('patientPathology').textContent = 'Protocolo: ' + pathologyNames[currentPatient.pathology];
            
            // Atualizar estat√≠sticas
            document.getElementById('totalSessions').textContent = currentPatient.sessions?.length || 0;
            document.getElementById('totalPoints').textContent = currentPatient.totalPoints || 0;
            
            const avgPrec = currentPatient.sessions?.length > 0 
                ? Math.round(currentPatient.sessions.reduce((sum, s) => sum + s.precision, 0) / currentPatient.sessions.length)
                : 0;
            document.getElementById('avgPrecision').textContent = avgPrec + '%';
            document.getElementById('bestStreak').textContent = currentPatient.bestStreak || 0;
            
            // Carregar jogos recomendados
            loadRecommendedGames();
            loadAllGames();
            
            showScreen('patientDashboardScreen');
        }
        
        function loadRecommendedGames() {
            const recommended = pathologyProtocols[currentPatient.pathology];
            const container = document.getElementById('recommendedGames');
            
            let html = '';
            recommended.forEach(gameId => {
                const game = games[gameId];
                html += `
                    <div class="game-card" onclick="startGame('${gameId}')">
                        <div class="game-icon">${game.icon}</div>
                        <h3>${game.name}</h3>
                        <p>${game.skill}</p>
                    </div>
                `;
            });
            container.innerHTML = html;
        }
        
        function loadAllGames() {
            const container = document.getElementById('allGamesGrid');
            let html = '';
            
            Object.keys(games).forEach(gameId => {
                const game = games[gameId];
                html += `
                    <div class="game-card" onclick="startGame('${gameId}')">
                        <div class="game-icon">${game.icon}</div>
                        <h3>${game.name}</h3>
                        <p>${game.skill}</p>
                    </div>
                `;
            });
            container.innerHTML = html;
        }
        
        // Jogo - Sele√ß√£o de N√≠vel
        function startGame(gameId) {
            const modal = document.getElementById('genericModal');
            const modalContent = document.getElementById('modalContent');
            
            modalContent.innerHTML = `
                <h2 style="color: #1e3c72; margin-bottom: 20px;">Escolha o N√≠vel</h2>
                <p style="margin-bottom: 30px; color: #666;">${games[gameId].name}</p>
                
                <div style="display: grid; gap: 15px;">
                    <button onclick="startGameWithLevel('${gameId}', 'facil')" style="padding: 20px; font-size: 1.1em; background: #4caf50; color: white; border: none; border-radius: 10px; cursor: pointer;">
                        üòä F√°cil - Ideal para iniciantes
                    </button>
                    <button onclick="startGameWithLevel('${gameId}', 'medio')" style="padding: 20px; font-size: 1.1em; background: #ff9800; color: white; border: none; border-radius: 10px; cursor: pointer;">
                        üéØ M√©dio - Desafio equilibrado
                    </button>
                    <button onclick="startGameWithLevel('${gameId}', 'dificil')" style="padding: 20px; font-size: 1.1em; background: #f44336; color: white; border: none; border-radius: 10px; cursor: pointer;">
                        üî• Dif√≠cil - Para experts
                    </button>
                </div>
            `;
            
            modal.style.display = 'block';
        }
        
        function startGameWithLevel(gameId, level) {
            closeModal();
            
            gameState = {
                gameId: gameId,
                gameName: games[gameId].name,
                gameSkill: games[gameId].skill,
                level: level,
                hits: 0,
                errors: 0,
                score: 0,
                timeLeft: level === 'facil' ? 90 : (level === 'medio' ? 60 : 45),
                startTime: Date.now(),
                reactionTimes: []
            };
            
            document.getElementById('timer').textContent = gameState.timeLeft;
            document.getElementById('hits').textContent = gameState.hits;
            document.getElementById('errors').textContent = gameState.errors;
            document.getElementById('score').textContent = gameState.score;
            
            showScreen('gameScreen');
            initializeGame(gameId, level);
            startTimer();
        }
        
        function initializeGame(gameId, level) {
            const gameArea = document.getElementById('gameArea');
            
            // Jogos com mec√¢nicas √∫nicas
            if (gameId === 'memory1') {
                initMemoryGame(level);
            } else if (gameId === 'attention4') {
                initStroopGame(level);
            } else if (gameId === 'attention1') {
                initFocusGame(level);
            } else if (gameId === 'attention2') {
                initTreasureHuntGame(level);
            } else if (gameId === 'attention3') {
                initMultitaskGame(level);
            } else if (gameId === 'memory2') {
                initCodeGame(level);
            } else if (gameId === 'memory4') {
                initMagicWordsGame(level);
            } else if (gameId === 'language1') {
                initWordStormGame(level);
            } else if (gameId === 'language2') {
                initNamingGame(level);
            } else if (gameId === 'language3') {
                initSentenceMasterGame(level);
            } else if (gameId === 'language4') {
                initOrganizeGame(level);
            } else if (gameId === 'executive1') {
                initTowerGame(level);
            } else if (gameId === 'executive2') {
                initCardMasterGame(level);
            } else if (gameId === 'executive3') {
                initMazeGame(level);
            } else if (gameId === 'executive4') {
                initPatternGame(level);
            } else {
                initStandardGame(gameId, level);
            }
        }
        
        function initMemoryGame(level) {
            const configs = {
                facil: { pairs: 6, symbols: ['üéØ', '‚≠ê', 'üé®', 'üé≠', 'üé™', 'üé¨'] },
                medio: { pairs: 10, symbols: ['üéØ', '‚≠ê', 'üé®', 'üé≠', 'üé™', 'üé¨', 'üéÆ', 'üé≤', 'üé∞', 'üé≥'] },
                dificil: { pairs: 12, symbols: ['üéØ', '‚≠ê', 'üé®', 'üé≠', 'üé™', 'üé¨', 'üéÆ', 'üé≤', 'üé∞', 'üé≥', 'üé∫', 'üé∏'] }
            };
            
            const config = configs[level];
            const cards = [...config.symbols, ...config.symbols].sort(() => Math.random() - 0.5);
            
            gameState.memoryCards = cards;
            gameState.flippedCards = [];
            gameState.matchedPairs = 0;
            gameState.attempts = 0;
            
            const cols = level === 'facil' ? 4 : (level === 'medio' ? 5 : 6);
            
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = `
                <div style="text-align: center;">
                    <h2 style="color: #1e3c72; margin-bottom: 20px;">üé¥ Pares Perfeitos</h2>
                    <p style="margin-bottom: 30px;">N√≠vel: <strong>${level.toUpperCase()}</strong> | Encontre todos os ${config.pairs} pares!</p>
                    <div style="display: grid; grid-template-columns: repeat(${cols}, 1fr); gap: 10px; max-width: 600px; margin: 0 auto;">
                        ${cards.map((symbol, i) => `
                            <div id="card-${i}" onclick="flipCard(${i})" style="
                                width: 80px;
                                height: 80px;
                                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                border-radius: 10px;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                font-size: 2.5em;
                                cursor: pointer;
                                transition: all 0.3s;
                                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                            ">
                                <span style="display: none;">${symbol}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div style="margin-top: 20px; font-size: 1.1em;">
                        <span style="margin-right: 20px;">Tentativas: <strong id="attempts">0</strong></span>
                        <span>Pares: <strong id="pairs">0/${config.pairs}</strong></span>
                    </div>
                </div>
            `;
        }
        
        function flipCard(index) {
            if (gameState.flippedCards.length >= 2) return;
            if (gameState.flippedCards.includes(index)) return;
            
            const card = document.getElementById(`card-${index}`);
            const symbol = card.querySelector('span');
            
            card.style.background = 'white';
            card.style.border = '3px solid #1e3c72';
            symbol.style.display = 'block';
            
            gameState.flippedCards.push(index);
            
            if (gameState.flippedCards.length === 2) {
                gameState.attempts++;
                document.getElementById('attempts').textContent = gameState.attempts;
                
                const [first, second] = gameState.flippedCards;
                const firstSymbol = gameState.memoryCards[first];
                const secondSymbol = gameState.memoryCards[second];
                
                if (firstSymbol === secondSymbol) {
                    gameState.matchedPairs++;
                    gameState.hits++;
                    gameState.score += (gameState.level === 'dificil' ? 30 : (gameState.level === 'medio' ? 20 : 10));
                    
                    document.getElementById('pairs').textContent = `${gameState.matchedPairs}/${gameState.memoryCards.length / 2}`;
                    document.getElementById('hits').textContent = gameState.hits;
                    document.getElementById('score').textContent = gameState.score;
                    
                    gameState.flippedCards = [];
                    
                    if (gameState.matchedPairs === gameState.memoryCards.length / 2) {
                        setTimeout(() => endGame(), 500);
                    }
                } else {
                    gameState.errors++;
                    document.getElementById('errors').textContent = gameState.errors;
                    
                    setTimeout(() => {
                        document.getElementById(`card-${first}`).style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                        document.getElementById(`card-${first}`).style.border = 'none';
                        document.getElementById(`card-${first}`).querySelector('span').style.display = 'none';
                        
                        document.getElementById(`card-${second}`).style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                        document.getElementById(`card-${second}`).style.border = 'none';
                        document.getElementById(`card-${second}`).querySelector('span').style.display = 'none';
                        
                        gameState.flippedCards = [];
                    }, 1000);
                }
            }
        }
        
        function initStandardGame(gameId, level) {
            const configs = {
                facil: { speed: 2000, targets: 0.7, gridSize: 3 },
                medio: { speed: 1200, targets: 0.5, gridSize: 4 },
                dificil: { speed: 800, targets: 0.3, gridSize: 5 }
            };
            
            const config = configs[level];
            gameState.gameInterval = null;
            gameState.currentTargets = [];
            
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = `
                <div style="text-align: center;">
                    <h2 style="color: #1e3c72; margin-bottom: 20px;">${games[gameId].name}</h2>
                    <p style="font-size: 1.1em; margin-bottom: 10px;">${games[gameId].skill}</p>
                    <p style="margin-bottom: 30px; color: #666;">N√≠vel: <strong>${level.toUpperCase()}</strong></p>
                    <div id="gameGrid" style="display: grid; grid-template-columns: repeat(${config.gridSize}, 1fr); gap: 15px; max-width: ${config.gridSize * 120}px; margin: 0 auto;">
                        ${Array(config.gridSize * config.gridSize).fill(0).map((_, i) => `
                            <button id="btn-${i}" onclick="gameClick(${i})" style="
                                padding: 30px;
                                font-size: 2.5em;
                                background: white;
                                border: 3px solid #1e3c72;
                                border-radius: 15px;
                                cursor: pointer;
                                transition: all 0.2s;
                                min-height: 100px;
                            ">
                                
                            </button>
                        `).join('')}
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: #f0f0f0; border-radius: 10px; display: inline-block;">
                        <p style="margin-bottom: 5px;">üéØ Clique apenas nos alvos corretos!</p>
                        <p style="font-size: 0.9em; color: #666;">Evite os distratores</p>
                    </div>
                </div>
            `;
            
            updateTargets(config);
            gameState.gameInterval = setInterval(() => updateTargets(config), config.speed);
        }
        
        function updateTargets(config) {
            const buttons = document.querySelectorAll('#gameGrid button');
            const symbols = ['üéØ', '‚ùå', '‚≠ê', 'üî∂', 'üíé', 'üî¥'];
            
            gameState.currentTargets = [];
            
            buttons.forEach((btn, i) => {
                const isTarget = Math.random() < config.targets;
                const symbol = isTarget ? 'üéØ' : symbols[Math.floor(Math.random() * (symbols.length - 1)) + 1];
                
                btn.textContent = symbol;
                btn.style.background = 'white';
                
                if (isTarget) {
                    gameState.currentTargets.push(i);
                }
            });
        }
        
        function gameClick(index) {
            const btn = document.getElementById(`btn-${index}`);
            const clickTime = Date.now();
            const reactionTime = clickTime - gameState.startTime;
            
            gameState.reactionTimes.push(reactionTime);
            
            if (gameState.currentTargets.includes(index)) {
                gameState.hits++;
                gameState.score += (gameState.level === 'dificil' ? 15 : (gameState.level === 'medio' ? 10 : 5));
                
                btn.style.background = '#4caf50';
                btn.style.transform = 'scale(1.1)';
                
                setTimeout(() => {
                    btn.style.transform = 'scale(1)';
                }, 200);
                
                document.getElementById('hits').textContent = gameState.hits;
                document.getElementById('score').textContent = gameState.score;
            } else {
                gameState.errors++;
                gameState.score = Math.max(0, gameState.score - 5);
                
                btn.style.background = '#f44336';
                btn.style.transform = 'scale(0.9)';
                
                setTimeout(() => {
                    btn.style.transform = 'scale(1)';
                }, 200);
                
                document.getElementById('errors').textContent = gameState.errors;
                document.getElementById('score').textContent = gameState.score;
            }
        }
        
        function startTimer() {
            gameTimer = setInterval(() => {
                gameState.timeLeft--;
                document.getElementById('timer').textContent = gameState.timeLeft;
                
                if (gameState.timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }
        
        function quitGame() {
            if (confirm('Deseja realmente sair do jogo? O progresso ser√° perdido.')) {
                if (gameTimer) clearInterval(gameTimer);
                if (gameState.gameInterval) clearInterval(gameState.gameInterval);
                backToPatientDashboard();
            }
        }
        
        function endGame() {
            if (gameTimer) clearInterval(gameTimer);
            if (gameState.gameInterval) clearInterval(gameState.gameInterval);
            
            const precision = Math.round((gameState.hits / (gameState.hits + gameState.errors)) * 100) || 0;
            const avgReactionTime = gameState.reactionTimes.length > 0 
                ? Math.round(gameState.reactionTimes.reduce((a, b) => a + b, 0) / gameState.reactionTimes.length)
                : 0;
            
            let levelBonus = 1;
            if (gameState.level === 'medio') levelBonus = 1.5;
            if (gameState.level === 'dificil') levelBonus = 2;
            
            gameState.score = Math.round(gameState.score * levelBonus);
            
            if (precision >= 90) gameState.score += 100;
            else if (precision >= 80) gameState.score += 50;
            
            const session = {
                gameId: gameState.gameId,
                gameName: gameState.gameName,
                gameSkill: gameState.gameSkill,
                level: gameState.level,
                hits: gameState.hits,
                errors: gameState.errors,
                precision: precision,
                score: gameState.score,
                reactionTime: avgReactionTime,
                date: new Date().toISOString()
            };
            
            if (!currentPatient.sessions) currentPatient.sessions = [];
            currentPatient.sessions.push(session);
            currentPatient.totalPoints = (currentPatient.totalPoints || 0) + gameState.score;
            
            localStorage.setItem('patient_' + currentPatient.cpf, JSON.stringify(currentPatient));
            localStorage.setItem('currentPatient', JSON.stringify(currentPatient));
            
            showResults(session);
        }
        
        function showResults(session) {
            document.getElementById('resultGame').textContent = session.gameName;
            document.getElementById('resultSkill').textContent = session.gameSkill + ' (N√≠vel: ' + session.level.toUpperCase() + ')';
            document.getElementById('resultHits').textContent = session.hits;
            document.getElementById('resultErrors').textContent = session.errors;
            document.getElementById('resultPrecision').textContent = session.precision;
            document.getElementById('resultScore').textContent = session.score;
            
            // Mensagem de evolu√ß√£o
            const isFirstSession = currentPatient.sessions.length === 1;
            let evolutionMsg = '';
            
            if (isFirstSession) {
                evolutionMsg = `
                    <h3>üéØ Primeira Sess√£o Registrada!</h3>
                    <p>Esta √© sua linha de base (baseline). Continue treinando para ver sua evolu√ß√£o cerebral!</p>
                `;
            } else {
                const previousSessions = currentPatient.sessions.filter(s => s.gameId === session.gameId);
                if (previousSessions.length > 1) {
                    const baseline = previousSessions[0];
                    const improvement = ((session.precision - baseline.precision) / baseline.precision * 100).toFixed(0);
                    const scoreImprovement = ((session.score - baseline.score) / baseline.score * 100).toFixed(0);
                    
                    evolutionMsg = `
                        <h3>üß† Evolu√ß√£o Cerebral Detectada!</h3>
                        <p>Comparando com sua primeira sess√£o:</p>
                        <p style="font-size: 1.2em; margin: 10px 0;">
                            ${improvement > 0 ? `‚úÖ Sua precis√£o melhorou ${improvement}%!` : '‚ö†Ô∏è Continue treinando para melhorar!'}
                        </p>
                        <p style="font-size: 1.2em;">
                            ${scoreImprovement > 0 ? `‚ö° Sua pontua√ß√£o cresceu ${scoreImprovement}%!` : ''}
                        </p>
                    `;
                }
            }
            
            document.getElementById('evolutionMessage').innerHTML = evolutionMsg;
            
            // Barras de progresso
            setTimeout(() => {
                document.getElementById('precisionProgress').style.width = session.precision + '%';
                document.getElementById('precisionProgress').textContent = session.precision + '%';
                
                const speedScore = Math.min(100, Math.round((session.hits / 60) * 100));
                document.getElementById('speedProgress').style.width = speedScore + '%';
                document.getElementById('speedProgress').textContent = speedScore + '%';
            }, 500);
            
            showScreen('resultScreen');
        }
        
        function backToPatientDashboard() {
            showPatientDashboard();
        }
        
        // Fechar modal ao clicar fora
        window.onclick = function(event) {
            const modal = document.getElementById('genericModal');
            if (event.target == modal) {
                closeModal();
            }
        }
// IMPLEMENTA√á√ÉO DOS 7 NOVOS JOGOS COM MEC√ÇNICAS √öNICAS
// Para integrar no index.html

// ============================================
// JOGO 2: CORES EM CONFLITO (Stroop Test)
// ============================================
function initStroopGame(level) {
    const colors = ['vermelho', 'azul', 'verde', 'amarelo', 'roxo', 'laranja'];
    const colorCodes = {
        'vermelho': '#f44336',
        'azul': '#2196f3',
        'verde': '#4caf50',
        'amarelo': '#ffeb3b',
        'roxo': '#9c27b0',
        'laranja': '#ff9800'
    };
    
    const configs = {
        facil: { time: 2000, trials: 15 },
        medio: { time: 1500, trials: 20 },
        dificil: { time: 1000, trials: 30 }
    };
    
    const config = configs[level];
    gameState.stroopTrials = 0;
    gameState.stroopMaxTrials = config.trials;
    gameState.stroopTime = config.time;
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center; padding: 40px;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">üåà Cores em Conflito</h2>
            <p style="margin-bottom: 30px;">N√≠vel: <strong>${level.toUpperCase()}</strong> | Clique na COR da palavra, n√£o no que est√° escrito!</p>
            
            <div id="stroopWord" style="font-size: 4em; font-weight: bold; margin: 50px 0; min-height: 100px;"></div>
            
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; max-width: 500px; margin: 0 auto;">
                ${colors.map(color => `
                    <button onclick="checkStroopAnswer('${color}')" style="
                        padding: 20px;
                        font-size: 1.2em;
                        background: ${colorCodes[color]};
                        color: white;
                        border: none;
                        border-radius: 10px;
                        cursor: pointer;
                        font-weight: bold;
                        text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
                        transition: transform 0.1s;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        ${color.toUpperCase()}
                    </button>
                `).join('')}
            </div>
            
            <div style="margin-top: 30px; font-size: 1.2em;">
                Tentativa: <strong id="stroopTrial">0</strong> / ${config.trials}
            </div>
        </div>
    `;
    
    nextStroopTrial(colors, colorCodes);
}

function nextStroopTrial(colors, colorCodes) {
    if (gameState.stroopTrials >= gameState.stroopMaxTrials) {
        endGame();
        return;
    }
    
    const wordText = colors[Math.floor(Math.random() * colors.length)];
    const wordColor = colors[Math.floor(Math.random() * colors.length)];
    
    gameState.currentStroopAnswer = wordColor;
    gameState.stroopStartTime = Date.now();
    
    const wordElement = document.getElementById('stroopWord');
    wordElement.textContent = wordText.toUpperCase();
    wordElement.style.color = colorCodes[wordColor];
}

function checkStroopAnswer(answer) {
    const reactionTime = Date.now() - gameState.stroopStartTime;
    gameState.reactionTimes.push(reactionTime);
    
    if (answer === gameState.currentStroopAnswer) {
        gameState.hits++;
        gameState.score += (gameState.level === 'dificil' ? 20 : (gameState.level === 'medio' ? 15 : 10));
        document.getElementById('stroopWord').textContent = '‚úÖ';
    } else {
        gameState.errors++;
        document.getElementById('stroopWord').textContent = '‚ùå';
    }
    
    gameState.stroopTrials++;
    document.getElementById('stroopTrial').textContent = gameState.stroopTrials;
    document.getElementById('hits').textContent = gameState.hits;
    document.getElementById('errors').textContent = gameState.errors;
    document.getElementById('score').textContent = gameState.score;
    
    setTimeout(() => {
        const colors = ['vermelho', 'azul', 'verde', 'amarelo', 'roxo', 'laranja'];
        const colorCodes = {
            'vermelho': '#f44336',
            'azul': '#2196f3',
            'verde': '#4caf50',
            'amarelo': '#ffeb3b',
            'roxo': '#9c27b0',
            'laranja': '#ff9800'
        };
        nextStroopTrial(colors, colorCodes);
    }, 500);
}

// ============================================
// JOGO 3: FOCO LASER (Aten√ß√£o Sustentada)
// ============================================
function initFocusGame(level) {
    const configs = {
        facil: { interval: 1500, targets: 20 },
        medio: { interval: 1000, targets: 30 },
        dificil: { interval: 700, targets: 40 }
    };
    
    const config = configs[level];
    gameState.focusTargets = 0;
    gameState.focusMaxTargets = config.targets;
    gameState.focusInterval = config.interval;
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center; padding: 20px;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">‚ö° Foco Laser</h2>
            <p style="margin-bottom: 30px;">N√≠vel: <strong>${level.toUpperCase()}</strong> | Clique nos alvos üéØ rapidamente!</p>
            
            <div id="focusArea" style="
                position: relative;
                width: 600px;
                height: 400px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 15px;
                margin: 0 auto;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            "></div>
            
            <div style="margin-top: 20px; font-size: 1.2em;">
                Alvos: <strong id="focusTargets">0</strong> / ${config.targets}
            </div>
        </div>
    `;
    
    spawnFocusTarget();
}

function spawnFocusTarget() {
    if (gameState.focusTargets >= gameState.focusMaxTargets) {
        endGame();
        return;
    }
    
    const focusArea = document.getElementById('focusArea');
    const target = document.createElement('div');
    
    const x = Math.random() * 540; // 600 - 60 (target size)
    const y = Math.random() * 340; // 400 - 60 (target size)
    
    target.innerHTML = 'üéØ';
    target.style.cssText = `
        position: absolute;
        left: ${x}px;
        top: ${y}px;
        font-size: 3em;
        cursor: pointer;
        animation: pulse 0.5s infinite;
    `;
    
    gameState.focusStartTime = Date.now();
    
    target.onclick = () => {
        const reactionTime = Date.now() - gameState.focusStartTime;
        gameState.reactionTimes.push(reactionTime);
        
        gameState.hits++;
        gameState.score += (gameState.level === 'dificil' ? 15 : (gameState.level === 'medio' ? 10 : 5));
        gameState.focusTargets++;
        
        document.getElementById('hits').textContent = gameState.hits;
        document.getElementById('score').textContent = gameState.score;
        document.getElementById('focusTargets').textContent = gameState.focusTargets;
        
        target.remove();
        
        setTimeout(() => spawnFocusTarget(), gameState.focusInterval);
    };
    
    focusArea.appendChild(target);
    
    // Auto-remove after timeout (miss)
    setTimeout(() => {
        if (target.parentElement) {
            gameState.errors++;
            document.getElementById('errors').textContent = gameState.errors;
            target.remove();
            spawnFocusTarget();
        }
    }, gameState.focusInterval * 2);
}

// ============================================
// JOGO 4: C√ìDIGO SECRETO (Mem√≥ria de Sequ√™ncia)
// ============================================
function initCodeGame(level) {
    const configs = {
        facil: { length: 4, rounds: 5 },
        medio: { length: 6, rounds: 7 },
        dificil: { length: 8, rounds: 10 }
    };
    
    const config = configs[level];
    gameState.codeRound = 0;
    gameState.codeMaxRounds = config.rounds;
    gameState.codeLength = config.length;
    gameState.codeSequence = [];
    gameState.codeUserInput = [];
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center; padding: 40px;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">üîê C√≥digo Secreto</h2>
            <p style="margin-bottom: 30px;">N√≠vel: <strong>${level.toUpperCase()}</strong> | Memorize e repita a sequ√™ncia!</p>
            
            <div id="codeDisplay" style="
                font-size: 3em;
                font-weight: bold;
                min-height: 100px;
                margin: 30px 0;
                color: #1e3c72;
            "></div>
            
            <div id="codeButtons" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; max-width: 400px; margin: 0 auto;">
                ${[0,1,2,3,4,5,6,7,8,9].map(num => `
                    <button onclick="inputCodeDigit(${num})" style="
                        padding: 30px;
                        font-size: 2em;
                        font-weight: bold;
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        color: white;
                        border: none;
                        border-radius: 10px;
                        cursor: pointer;
                        transition: transform 0.1s;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        ${num}
                    </button>
                `).join('')}
            </div>
            
            <div style="margin-top: 30px; font-size: 1.2em;">
                Rodada: <strong id="codeRound">0</strong> / ${config.rounds}
            </div>
        </div>
    `;
    
    startCodeRound();
}

function startCodeRound() {
    if (gameState.codeRound >= gameState.codeMaxRounds) {
        endGame();
        return;
    }
    
    gameState.codeSequence = [];
    gameState.codeUserInput = [];
    
    for (let i = 0; i < gameState.codeLength; i++) {
        gameState.codeSequence.push(Math.floor(Math.random() * 10));
    }
    
    const display = document.getElementById('codeDisplay');
    display.textContent = 'Memorize...';
    
    setTimeout(() => {
        display.textContent = gameState.codeSequence.join(' ');
        
        setTimeout(() => {
            display.textContent = 'Digite a sequ√™ncia!';
            gameState.codeStartTime = Date.now();
        }, 2000);
    }, 1000);
}

function inputCodeDigit(digit) {
    if (gameState.codeUserInput.length >= gameState.codeLength) return;
    
    gameState.codeUserInput.push(digit);
    
    const display = document.getElementById('codeDisplay');
    display.textContent = gameState.codeUserInput.join(' ');
    
    if (gameState.codeUserInput.length === gameState.codeLength) {
        checkCodeSequence();
    }
}

function checkCodeSequence() {
    const correct = gameState.codeSequence.every((num, i) => num === gameState.codeUserInput[i]);
    
    const reactionTime = Date.now() - gameState.codeStartTime;
    gameState.reactionTimes.push(reactionTime);
    
    const display = document.getElementById('codeDisplay');
    
    if (correct) {
        gameState.hits++;
        gameState.score += (gameState.level === 'dificil' ? 30 : (gameState.level === 'medio' ? 20 : 10));
        display.textContent = '‚úÖ CORRETO!';
    } else {
        gameState.errors++;
        display.textContent = '‚ùå ERRADO!';
    }
    
    gameState.codeRound++;
    document.getElementById('codeRound').textContent = gameState.codeRound;
    document.getElementById('hits').textContent = gameState.hits;
    document.getElementById('errors').textContent = gameState.errors;
    document.getElementById('score').textContent = gameState.score;
    
    setTimeout(() => startCodeRound(), 2000);
}

// ============================================
// JOGO 5: TEMPESTADE DE PALAVRAS (Flu√™ncia Verbal)
// ============================================
function initWordStormGame(level) {
    const categories = {
        facil: ['Animais', 'Frutas', 'Cores'],
        medio: ['Profiss√µes', 'Pa√≠ses', 'Objetos da Casa'],
        dificil: ['Verbos', 'Adjetivos', 'Instrumentos Musicais']
    };
    
    const timeLimit = {
        facil: 60,
        medio: 45,
        dificil: 30
    };
    
    const category = categories[level][Math.floor(Math.random() * categories[level].length)];
    gameState.wordStormCategory = category;
    gameState.wordStormWords = [];
    gameState.wordStormTime = timeLimit[level];
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center; padding: 40px;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">üå™Ô∏è Tempestade de Palavras</h2>
            <p style="margin-bottom: 30px;">N√≠vel: <strong>${level.toUpperCase()}</strong></p>
            
            <div style="background: #f5f5f5; padding: 30px; border-radius: 15px; margin-bottom: 30px;">
                <h3 style="color: #1e3c72; margin-bottom: 15px;">Categoria:</h3>
                <div style="font-size: 2em; font-weight: bold; color: #667eea;">${category}</div>
            </div>
            
            <p style="margin-bottom: 20px; font-size: 1.1em;">Digite o m√°ximo de palavras que conseguir!</p>
            
            <input type="text" id="wordInput" placeholder="Digite uma palavra e pressione Enter" style="
                width: 400px;
                padding: 15px;
                font-size: 1.2em;
                border: 2px solid #667eea;
                border-radius: 10px;
                margin-bottom: 20px;
            " onkeypress="if(event.key==='Enter') submitWord()">
            
            <div id="wordsList" style="
                min-height: 150px;
                background: white;
                padding: 20px;
                border-radius: 10px;
                margin: 20px auto;
                max-width: 600px;
                text-align: left;
            ">
                <strong>Palavras digitadas:</strong>
                <div id="wordsDisplay" style="margin-top: 10px; display: flex; flex-wrap: wrap; gap: 10px;"></div>
            </div>
            
            <div style="font-size: 1.2em; margin-top: 20px;">
                Total: <strong id="wordCount">0</strong> palavras
            </div>
        </div>
    `;
    
    document.getElementById('wordInput').focus();
}

function submitWord() {
    const input = document.getElementById('wordInput');
    const word = input.value.trim().toLowerCase();
    
    if (word && !gameState.wordStormWords.includes(word)) {
        gameState.wordStormWords.push(word);
        gameState.hits++;
        gameState.score += (gameState.level === 'dificil' ? 15 : (gameState.level === 'medio' ? 10 : 5));
        
        const wordsDisplay = document.getElementById('wordsDisplay');
        const wordBadge = document.createElement('span');
        wordBadge.textContent = word;
        wordBadge.style.cssText = `
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        `;
        wordsDisplay.appendChild(wordBadge);
        
        document.getElementById('wordCount').textContent = gameState.wordStormWords.length;
        document.getElementById('hits').textContent = gameState.hits;
        document.getElementById('score').textContent = gameState.score;
    }
    
    input.value = '';
    input.focus();
}

// ============================================
// JOGO 6: NOME CERTO (Nomea√ß√£o R√°pida)
// ============================================
function initNamingGame(level) {
    const objects = {
        facil: [
            {emoji: 'üêï', name: 'cachorro'},
            {emoji: 'üê±', name: 'gato'},
            {emoji: 'üå≥', name: '√°rvore'},
            {emoji: 'üè†', name: 'casa'},
            {emoji: 'üöó', name: 'carro'}
        ],
        medio: [
            {emoji: 'ü¶ã', name: 'borboleta'},
            {emoji: 'üé∏', name: 'viol√£o'},
            {emoji: 'üèîÔ∏è', name: 'montanha'},
            {emoji: 'üåä', name: 'onda'},
            {emoji: 'üé®', name: 'paleta'}
        ],
        dificil: [
            {emoji: 'üî¨', name: 'microsc√≥pio'},
            {emoji: 'üé∫', name: 'trompete'},
            {emoji: '‚öóÔ∏è', name: 'b√©quer'},
            {emoji: 'üóø', name: 'est√°tua'},
            {emoji: 'üé≠', name: 'm√°scara'}
        ]
    };
    
    gameState.namingObjects = objects[level];
    gameState.namingCurrent = 0;
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center; padding: 40px;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">üéØ Nome Certo</h2>
            <p style="margin-bottom: 30px;">N√≠vel: <strong>${level.toUpperCase()}</strong> | Digite o nome do objeto!</p>
            
            <div id="namingObject" style="font-size: 8em; margin: 40px 0;"></div>
            
            <input type="text" id="namingInput" placeholder="Digite o nome" style="
                width: 400px;
                padding: 15px;
                font-size: 1.5em;
                border: 2px solid #667eea;
                border-radius: 10px;
                text-align: center;
            " onkeypress="if(event.key==='Enter') checkNaming()">
            
            <div style="margin-top: 30px; font-size: 1.2em;">
                Objeto: <strong id="namingProgress">0</strong> / ${objects[level].length}
            </div>
        </div>
    `;
    
    showNextNamingObject();
}

function showNextNamingObject() {
    if (gameState.namingCurrent >= gameState.namingObjects.length) {
        endGame();
        return;
    }
    
    const obj = gameState.namingObjects[gameState.namingCurrent];
    document.getElementById('namingObject').textContent = obj.emoji;
    document.getElementById('namingInput').value = '';
    document.getElementById('namingInput').focus();
    
    gameState.namingStartTime = Date.now();
}

function checkNaming() {
    const input = document.getElementById('namingInput').value.trim().toLowerCase();
    const obj = gameState.namingObjects[gameState.namingCurrent];
    
    const reactionTime = Date.now() - gameState.namingStartTime;
    gameState.reactionTimes.push(reactionTime);
    
    if (input === obj.name) {
        gameState.hits++;
        gameState.score += (gameState.level === 'dificil' ? 25 : (gameState.level === 'medio' ? 15 : 10));
        document.getElementById('namingObject').textContent = '‚úÖ';
    } else {
        gameState.errors++;
        document.getElementById('namingObject').textContent = '‚ùå';
    }
    
    gameState.namingCurrent++;
    document.getElementById('namingProgress').textContent = gameState.namingCurrent;
    document.getElementById('hits').textContent = gameState.hits;
    document.getElementById('errors').textContent = gameState.errors;
    document.getElementById('score').textContent = gameState.score;
    
    setTimeout(() => showNextNamingObject(), 1000);
}

// ============================================
// JOGO 7: TORRE ESTRAT√âGICA (Torre de Han√≥i)
// ============================================
function initTowerGame(level) {
    const disks = {
        facil: 3,
        medio: 4,
        dificil: 5
    };
    
    gameState.towerDisks = disks[level];
    gameState.towers = [[], [], []];
    
    for (let i = disks[level]; i >= 1; i--) {
        gameState.towers[0].push(i);
    }
    
    gameState.towerMoves = 0;
    gameState.towerSelected = null;
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center; padding: 40px;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">üóº Torre Estrat√©gica</h2>
            <p style="margin-bottom: 30px;">N√≠vel: <strong>${level.toUpperCase()}</strong> | Mova todos os discos para a torre direita!</p>
            
            <div id="towerGame" style="display: flex; justify-content: space-around; margin: 40px auto; max-width: 600px;">
                ${[0,1,2].map(i => `
                    <div onclick="selectTower(${i})" style="
                        width: 180px;
                        min-height: 250px;
                        background: #f5f5f5;
                        border-radius: 10px;
                        padding: 10px;
                        cursor: pointer;
                        display: flex;
                        flex-direction: column-reverse;
                        align-items: center;
                        border: 3px solid transparent;
                    " id="tower${i}">
                        <div style="width: 10px; height: 200px; background: #1e3c72; border-radius: 5px;"></div>
                    </div>
                `).join('')}
            </div>
            
            <div style="font-size: 1.2em; margin-top: 20px;">
                Movimentos: <strong id="towerMoves">0</strong>
            </div>
        </div>
    `;
    
    renderTowers();
}

function renderTowers() {
    for (let i = 0; i < 3; i++) {
        const tower = document.getElementById(`tower${i}`);
        const base = tower.querySelector('div');
        tower.innerHTML = '';
        tower.appendChild(base);
        
        gameState.towers[i].forEach(disk => {
            const diskEl = document.createElement('div');
            diskEl.style.cssText = `
                width: ${disk * 30}px;
                height: 30px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 5px;
                margin: 2px 0;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: bold;
            `;
            diskEl.textContent = disk;
            tower.insertBefore(diskEl, base);
        });
    }
}

function selectTower(towerIndex) {
    if (gameState.towerSelected === null) {
        if (gameState.towers[towerIndex].length > 0) {
            gameState.towerSelected = towerIndex;
            document.getElementById(`tower${towerIndex}`).style.border = '3px solid #667eea';
        }
    } else {
        if (towerIndex === gameState.towerSelected) {
            document.getElementById(`tower${gameState.towerSelected}`).style.border = '3px solid transparent';
            gameState.towerSelected = null;
        } else {
            const fromTower = gameState.towers[gameState.towerSelected];
            const toTower = gameState.towers[towerIndex];
            
            if (fromTower.length > 0) {
                const disk = fromTower[fromTower.length - 1];
                
                if (toTower.length === 0 || disk < toTower[toTower.length - 1]) {
                    toTower.push(fromTower.pop());
                    gameState.towerMoves++;
                    gameState.score += (gameState.level === 'dificil' ? 10 : (gameState.level === 'medio' ? 7 : 5));
                    
                    document.getElementById('towerMoves').textContent = gameState.towerMoves;
                    document.getElementById('score').textContent = gameState.score;
                    
                    renderTowers();
                    
                    if (gameState.towers[2].length === gameState.towerDisks) {
                        gameState.hits = gameState.towerDisks;
                        document.getElementById('hits').textContent = gameState.hits;
                        setTimeout(() => endGame(), 1000);
                    }
                }
            }
            
            document.getElementById(`tower${gameState.towerSelected}`).style.border = '3px solid transparent';
            gameState.towerSelected = null;
        }
    }
}

// ============================================
// JOGO 8: PADR√ïES OCULTOS (Sequ√™ncias L√≥gicas)
// ============================================
function initPatternGame(level) {
    const configs = {
        facil: { rounds: 5, length: 4 },
        medio: { rounds: 7, length: 5 },
        dificil: { rounds: 10, length: 6 }
    };
    
    const config = configs[level];
    gameState.patternRound = 0;
    gameState.patternMaxRounds = config.rounds;
    gameState.patternLength = config.length;
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center; padding: 40px;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">üî¢ Padr√µes Ocultos</h2>
            <p style="margin-bottom: 30px;">N√≠vel: <strong>${level.toUpperCase()}</strong> | Descubra o pr√≥ximo n√∫mero!</p>
            
            <div id="patternSequence" style="
                font-size: 2.5em;
                font-weight: bold;
                margin: 40px 0;
                color: #1e3c72;
            "></div>
            
            <p style="margin-bottom: 20px; font-size: 1.2em;">Qual √© o pr√≥ximo n√∫mero?</p>
            
            <input type="number" id="patternInput" placeholder="?" style="
                width: 200px;
                padding: 20px;
                font-size: 2em;
                text-align: center;
                border: 2px solid #667eea;
                border-radius: 10px;
            " onkeypress="if(event.key==='Enter') checkPattern()">
            
            <div style="margin-top: 30px; font-size: 1.2em;">
                Rodada: <strong id="patternRound">0</strong> / ${config.rounds}
            </div>
        </div>
    `;
    
    generatePattern();
}

function generatePattern() {
    if (gameState.patternRound >= gameState.patternMaxRounds) {
        endGame();
        return;
    }
    
    const patterns = [
        (n) => n + 2,  // +2
        (n) => n + 3,  // +3
        (n) => n * 2,  // x2
        (n) => n + n/2,  // +50%
        (n) => n + 5   // +5
    ];
    
    const pattern = patterns[Math.floor(Math.random() * patterns.length)];
    const start = Math.floor(Math.random() * 10) + 1;
    
    gameState.patternSequence = [start];
    for (let i = 1; i < gameState.patternLength; i++) {
        gameState.patternSequence.push(Math.round(pattern(gameState.patternSequence[i-1])));
    }
    
    gameState.patternAnswer = Math.round(pattern(gameState.patternSequence[gameState.patternSequence.length - 1]));
    
    document.getElementById('patternSequence').textContent = gameState.patternSequence.join(' - ') + ' - ?';
    document.getElementById('patternInput').value = '';
    document.getElementById('patternInput').focus();
    
    gameState.patternStartTime = Date.now();
}

function checkPattern() {
    const input = parseInt(document.getElementById('patternInput').value);
    
    const reactionTime = Date.now() - gameState.patternStartTime;
    gameState.reactionTimes.push(reactionTime);
    
    const tolerance = Math.abs(gameState.patternAnswer * 0.1); // 10% tolerance
    
    if (Math.abs(input - gameState.patternAnswer) <= tolerance) {
        gameState.hits++;
        gameState.score += (gameState.level === 'dificil' ? 30 : (gameState.level === 'medio' ? 20 : 10));
        document.getElementById('patternSequence').textContent = '‚úÖ Correto! Era ' + gameState.patternAnswer;
    } else {
        gameState.errors++;
        document.getElementById('patternSequence').textContent = '‚ùå Errado! Era ' + gameState.patternAnswer;
    }
    
    gameState.patternRound++;
    document.getElementById('patternRound').textContent = gameState.patternRound;
    document.getElementById('hits').textContent = gameState.hits;
    document.getElementById('errors').textContent = gameState.errors;
    document.getElementById('score').textContent = gameState.score;
    
    setTimeout(() => generatePattern(), 2000);
}

// JOGO 1: Ca√ßa ao Tesouro - Aten√ß√£o Seletiva
function initTreasureHuntGame(level) {
    const configs = {
        facil: { items: 8, time: 3000, gridSize: 4 },
        medio: { items: 12, time: 2000, gridSize: 5 },
        dificil: { items: 16, time: 1500, gridSize: 6 }
    };
    
    const config = configs[level];
    const allItems = ['üçé', 'üçä', 'üçå', 'üçá', 'üçì', 'ü•ù', 'ü•ë', 'üçÖ', 'ü•¨', 'ü•ï', 'üå∂Ô∏è', 'üåΩ', 'ü•¶', 'ü•í', 'ü•Ø', 'ü•ê'];
    const distractors = ['üü¶', 'üüß', 'üü®', 'üü©', 'üü™', '‚¨ú', '‚¨õ', 'üî≤'];
    
    gameState.targetItem = allItems[Math.floor(Math.random() * allItems.length)];
    gameState.foundItems = 0;
    gameState.totalTargets = Math.floor(config.items / 2);
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">üîç Ca√ßa ao Tesouro</h2>
            <p style="margin-bottom: 10px; font-size: 1.3em;">Encontre todos os: <span style="font-size: 2em;">${gameState.targetItem}</span></p>
            <p style="margin-bottom: 20px; color: #666;">N√≠vel: <strong>${level.toUpperCase()}</strong> | Encontrados: <strong id="foundCount">0/${gameState.totalTargets}</strong></p>
            <div id="treasureGrid" style="display: grid; grid-template-columns: repeat(${config.gridSize}, 1fr); gap: 10px; max-width: ${config.gridSize * 90}px; margin: 0 auto;">
            </div>
        </div>
    `;
    
    updateTreasureGrid(config);
    gameState.treasureInterval = setInterval(() => updateTreasureGrid(config), config.time);
}

function updateTreasureGrid(config) {
    const grid = document.getElementById('treasureGrid');
    if (!grid) return;
    
    const allItems = ['üçé', 'üçä', 'üçå', 'üçá', 'üçì', 'ü•ù', 'ü•ë', 'üçÖ', 'ü•¨', 'ü•ï', 'üå∂Ô∏è', 'üåΩ', 'ü•¶', 'ü•í', 'ü•Ø', 'ü•ê'];
    const distractors = ['üü¶', 'üüß', 'üü®', 'üü©', 'üü™', '‚¨ú', '‚¨õ', 'üî≤'];
    
    const totalCells = config.gridSize * config.gridSize;
    const targetCount = Math.min(3, gameState.totalTargets - gameState.foundItems);
    
    let cells = [];
    for (let i = 0; i < targetCount; i++) cells.push(gameState.targetItem);
    for (let i = targetCount; i < totalCells; i++) {
        cells.push(Math.random() < 0.5 ? allItems[Math.floor(Math.random() * allItems.length)] : distractors[Math.floor(Math.random() * distractors.length)]);
    }
    cells = cells.sort(() => Math.random() - 0.5);
    
    grid.innerHTML = cells.map((item, i) => `
        <button onclick="clickTreasure('${item}', ${i})" style="
            padding: 20px;
            font-size: 2.5em;
            background: white;
            border: 3px solid #1e3c72;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        ">${item}</button>
    `).join('');
}

function clickTreasure(item, index) {
    if (item === gameState.targetItem) {
        gameState.foundItems++;
        gameState.hits++;
        gameState.score += (gameState.level === 'dificil' ? 30 : (gameState.level === 'medio' ? 20 : 10));
        
        document.getElementById('foundCount').textContent = `${gameState.foundItems}/${gameState.totalTargets}`;
        document.getElementById('hits').textContent = gameState.hits;
        document.getElementById('score').textContent = gameState.score;
        
        if (gameState.foundItems >= gameState.totalTargets) {
            clearInterval(gameState.treasureInterval);
            endGame();
        }
    } else {
        gameState.errors++;
        document.getElementById('errors').textContent = gameState.errors;
    }
}

// JOGO 2: Multitarefa Master - Aten√ß√£o Dividida
function initMultitaskGame(level) {
    const configs = {
        facil: { tasks: 2, speed: 2500 },
        medio: { tasks: 3, speed: 2000 },
        dificil: { tasks: 4, speed: 1500 }
    };
    
    const config = configs[level];
    gameState.tasks = [
        { name: 'N√∫meros Pares', check: (n) => n % 2 === 0, icon: 'üî¢' },
        { name: 'Letras Vogais', check: (l) => 'AEIOU'.includes(l), icon: 'üÖ∞Ô∏è' },
        { name: 'Cores Quentes', check: (c) => ['üî¥', 'üü†', 'üü°'].includes(c), icon: 'üå∂Ô∏è' },
        { name: 'Formas Redondas', check: (f) => ['‚ö´', 'üîµ', 'üî¥'].includes(f), icon: '‚óè' }
    ];
    
    gameState.activeTasks = gameState.tasks.slice(0, config.tasks);
    gameState.currentStimulus = null;
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">üé≠ Multitarefa Master</h2>
            <p style="margin-bottom: 20px; color: #666;">N√≠vel: <strong>${level.toUpperCase()}</strong> | Gerencie ${config.tasks} tarefas simult√¢neas!</p>
            
            <div style="display: grid; grid-template-columns: repeat(${config.tasks}, 1fr); gap: 15px; margin-bottom: 30px; max-width: 800px; margin-left: auto; margin-right: auto;">
                ${gameState.activeTasks.map((task, i) => `
                    <div style="padding: 15px; background: #f0f0f0; border-radius: 10px; border: 3px solid #1e3c72;">
                        <div style="font-size: 2em; margin-bottom: 5px;">${task.icon}</div>
                        <div style="font-size: 0.9em; font-weight: bold;">${task.name}</div>
                    </div>
                `).join('')}
            </div>
            
            <div id="stimulusArea" style="min-height: 200px; display: flex; align-items: center; justify-content: center; background: white; border: 4px solid #1e3c72; border-radius: 20px; margin-bottom: 20px;">
                <div style="font-size: 5em;" id="currentStimulus">?</div>
            </div>
            
            <div style="display: flex; gap: 20px; justify-content: center;">
                <button onclick="answerMultitask(true)" style="padding: 20px 40px; font-size: 1.3em; background: #4caf50; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold;">
                    ‚úîÔ∏è SIM
                </button>
                <button onclick="answerMultitask(false)" style="padding: 20px 40px; font-size: 1.3em; background: #f44336; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold;">
                    ‚ùå N√ÉO
                </button>
            </div>
        </div>
    `;
    
    generateMultitaskStimulus();
    gameState.multitaskInterval = setInterval(() => generateMultitaskStimulus(), config.speed);
}

function generateMultitaskStimulus() {
    const stimuli = {
        'N√∫meros Pares': ['2', '4', '6', '8', '10', '1', '3', '5', '7', '9'],
        'Letras Vogais': ['A', 'E', 'I', 'O', 'U', 'B', 'C', 'D', 'F', 'G'],
        'Cores Quentes': ['üî¥', 'üü†', 'üü°', 'üîµ', 'üü¢', 'üü™'],
        'Formas Redondas': ['‚ö´', 'üîµ', 'üî¥', 'üî∂', 'üî∑', 'üî∏']
    };
    
    const task = gameState.activeTasks[Math.floor(Math.random() * gameState.activeTasks.length)];
    const stimulusArray = stimuli[task.name];
    const stimulus = stimulusArray[Math.floor(Math.random() * stimulusArray.length)];
    
    gameState.currentStimulus = { value: stimulus, task: task, correct: task.check(stimulus) };
    document.getElementById('currentStimulus').textContent = stimulus;
}

function answerMultitask(answer) {
    if (!gameState.currentStimulus) return;
    
    if (answer === gameState.currentStimulus.correct) {
        gameState.hits++;
        gameState.score += (gameState.level === 'dificil' ? 25 : (gameState.level === 'medio' ? 15 : 10));
        document.getElementById('hits').textContent = gameState.hits;
        document.getElementById('score').textContent = gameState.score;
    } else {
        gameState.errors++;
        document.getElementById('errors').textContent = gameState.errors;
    }
    
    generateMultitaskStimulus();
}

// JOGO 3: Palavras M√°gicas - Mem√≥ria Verbal
function initMagicWordsGame(level) {
    const configs = {
        facil: { words: 5, showTime: 5000 },
        medio: { words: 8, showTime: 6000 },
        dificil: { words: 12, showTime: 7000 }
    };
    
    const config = configs[level];
    const wordBank = ['CASA', 'GATO', 'SOL', 'MAR', 'FLOR', 'LIVRO', 'MESA', 'CADEIRA', 'JANELA', 'PORTA', 'CARRO', 'BOLA', 'ESTRELA', 'NUVEM', 'MONTANHA', 'RIO', 'PONTE', 'JARDIM', 'ESCOLA', 'AMIGO'];
    
    gameState.magicWords = [];
    while (gameState.magicWords.length < config.words) {
        const word = wordBank[Math.floor(Math.random() * wordBank.length)];
        if (!gameState.magicWords.includes(word)) {
            gameState.magicWords.push(word);
        }
    }
    
    gameState.magicPhase = 'memorize';
    gameState.magicRecalled = [];
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">‚ú® Palavras M√°gicas</h2>
            <p style="margin-bottom: 20px; color: #666;">N√≠vel: <strong>${level.toUpperCase()}</strong> | Memorize ${config.words} palavras!</p>
            
            <div id="magicContent" style="min-height: 300px; display: flex; align-items: center; justify-content: center; background: white; border: 4px solid #1e3c72; border-radius: 20px; padding: 30px;">
                <div style="font-size: 1.5em; line-height: 2;">
                    ${gameState.magicWords.join(' ‚Ä¢ ')}
                </div>
            </div>
            
            <div style="margin-top: 20px; font-size: 1.1em; color: #666;">
                Memorize estas palavras! Voc√™ ter√° ${config.showTime/1000} segundos...
            </div>
        </div>
    `;
    
    setTimeout(() => startMagicRecall(config), config.showTime);
}

function startMagicRecall(config) {
    const allWords = ['CASA', 'GATO', 'SOL', 'MAR', 'FLOR', 'LIVRO', 'MESA', 'CADEIRA', 'JANELA', 'PORTA', 'CARRO', 'BOLA', 'ESTRELA', 'NUVEM', 'MONTANHA', 'RIO', 'PONTE', 'JARDIM', 'ESCOLA', 'AMIGO', 'CACHORRO', 'P√ÅSSARO', 'PEIXE', 'TELEFONE', 'COMPUTADOR'];
    
    let options = [...gameState.magicWords];
    while (options.length < config.words * 2) {
        const word = allWords[Math.floor(Math.random() * allWords.length)];
        if (!options.includes(word)) {
            options.push(word);
        }
    }
    options = options.sort(() => Math.random() - 0.5);
    
    gameState.magicPhase = 'recall';
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">‚ú® Palavras M√°gicas</h2>
            <p style="margin-bottom: 20px; color: #666;">Clique nas palavras que voc√™ memorizou!</p>
            <p style="margin-bottom: 20px; font-size: 1.1em;">Recordadas: <strong id="recallCount">0/${gameState.magicWords.length}</strong></p>
            
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; max-width: 600px; margin: 0 auto;">
                ${options.map((word, i) => `
                    <button id="word-${i}" onclick="selectMagicWord('${word}', ${i})" style="
                        padding: 20px;
                        font-size: 1.2em;
                        background: white;
                        border: 3px solid #1e3c72;
                        border-radius: 10px;
                        cursor: pointer;
                        transition: all 0.2s;
                        font-weight: bold;
                    ">${word}</button>
                `).join('')}
            </div>
        </div>
    `;
}

function selectMagicWord(word, index) {
    const btn = document.getElementById(`word-${index}`);
    if (!btn) return;
    
    if (gameState.magicWords.includes(word)) {
        if (!gameState.magicRecalled.includes(word)) {
            gameState.magicRecalled.push(word);
            gameState.hits++;
            gameState.score += (gameState.level === 'dificil' ? 30 : (gameState.level === 'medio' ? 20 : 10));
            
            btn.style.background = '#4caf50';
            btn.style.color = 'white';
            btn.style.borderColor = '#4caf50';
            btn.disabled = true;
            
            document.getElementById('recallCount').textContent = `${gameState.magicRecalled.length}/${gameState.magicWords.length}`;
            document.getElementById('hits').textContent = gameState.hits;
            document.getElementById('score').textContent = gameState.score;
            
            if (gameState.magicRecalled.length === gameState.magicWords.length) {
                setTimeout(() => endGame(), 500);
            }
        }
    } else {
        gameState.errors++;
        btn.style.background = '#f44336';
        btn.style.color = 'white';
        btn.style.borderColor = '#f44336';
        btn.disabled = true;
        document.getElementById('errors').textContent = gameState.errors;
    }
}

// JOGO 4: Mestre das Frases - Compreens√£o
function initSentenceMasterGame(level) {
    const sentences = {
        facil: [
            { text: 'O gato subiu na ___', options: ['√°rvore', 'nuvem', 'lua', 'estrela'], correct: 0 },
            { text: 'O sol brilha durante o ___', options: ['dia', 'noite', 'inverno', 'sono'], correct: 0 },
            { text: 'As aves voam no ___', options: ['c√©u', 'mar', 'ch√£o', 'buraco'], correct: 0 },
            { text: 'O peixe nada na ___', options: ['√°gua', 'terra', 'areia', 'grama'], correct: 0 },
            { text: 'A chuva cai das ___', options: ['nuvens', 'estrelas', 'flores', 'pedras'], correct: 0 }
        ],
        medio: [
            { text: 'A biblioteca √© um lugar para ___', options: ['ler', 'nadar', 'voar', 'correr'], correct: 0 },
            { text: 'O m√©dico trabalha no ___', options: ['hospital', 'oceano', 'deserto', 'espa√ßo'], correct: 0 },
            { text: 'As plantas precisam de ___ para crescer', options: ['luz', 'escurid√£o', 'frio', 'barulho'], correct: 0 },
            { text: 'O rel√≥gio serve para medir o ___', options: ['tempo', 'peso', 'tamanho', 'som'], correct: 0 },
            { text: 'A ponte conecta duas ___', options: ['margens', 'nuvens', 'ideias', 'cores'], correct: 0 }
        ],
        dificil: [
            { text: 'A fotoss√≠ntese √© o processo pelo qual as plantas produzem ___', options: ['energia', 'som', 'luz', 'movimento'], correct: 0 },
            { text: 'O eclipse ocorre quando a lua bloqueia a luz do ___', options: ['sol', 'oceano', 'vento', 'trovao'], correct: 0 },
            { text: 'A gravidade √© a for√ßa que mant√©m os objetos ___', options: ['no ch√£o', 'no ar', 'na √°gua', 'no fogo'], correct: 0 },
            { text: 'A evolu√ß√£o √© o processo de ___ das esp√©cies ao longo do tempo', options: ['adapta√ß√£o', 'destrui√ß√£o', 'congela√ß√£o', 'duplica√ß√£o'], correct: 0 },
            { text: 'O DNA cont√©m as ___ gen√©ticas dos seres vivos', options: ['informa√ß√µes', 'cores', 'sons', 'cheiros'], correct: 0 }
        ]
    };
    
    gameState.sentences = sentences[level];
    gameState.currentSentence = 0;
    
    showSentence();
}

function showSentence() {
    if (gameState.currentSentence >= gameState.sentences.length) {
        endGame();
        return;
    }
    
    const sentence = gameState.sentences[gameState.currentSentence];
    const gameArea = document.getElementById('gameArea');
    
    gameArea.innerHTML = `
        <div style="text-align: center;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">üìù Mestre das Frases</h2>
            <p style="margin-bottom: 20px; color: #666;">N√≠vel: <strong>${gameState.level.toUpperCase()}</strong> | Frase ${gameState.currentSentence + 1}/${gameState.sentences.length}</p>
            
            <div style="background: white; border: 4px solid #1e3c72; border-radius: 20px; padding: 40px; margin-bottom: 30px; min-height: 150px; display: flex; align-items: center; justify-content: center;">
                <p style="font-size: 1.8em; line-height: 1.5;">${sentence.text}</p>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; max-width: 600px; margin: 0 auto;">
                ${sentence.options.map((option, i) => `
                    <button onclick="answerSentence(${i})" style="
                        padding: 25px;
                        font-size: 1.3em;
                        background: white;
                        border: 3px solid #1e3c72;
                        border-radius: 10px;
                        cursor: pointer;
                        transition: all 0.2s;
                        font-weight: bold;
                    ">${option}</button>
                `).join('')}
            </div>
        </div>
    `;
}

function answerSentence(selected) {
    const sentence = gameState.sentences[gameState.currentSentence];
    
    if (selected === sentence.correct) {
        gameState.hits++;
        gameState.score += (gameState.level === 'dificil' ? 40 : (gameState.level === 'medio' ? 25 : 15));
        document.getElementById('hits').textContent = gameState.hits;
        document.getElementById('score').textContent = gameState.score;
    } else {
        gameState.errors++;
        document.getElementById('errors').textContent = gameState.errors;
    }
    
    gameState.currentSentence++;
    setTimeout(() => showSentence(), 500);
}

// JOGO 5: Organiza Tudo - Organiza√ß√£o Sem√¢ntica
function initOrganizeGame(level) {
    const categories = {
        facil: {
            'Animais': ['üê∂', 'üê±', 'üê≠', 'üêπ'],
            'Frutas': ['üçé', 'üçä', 'üçå', 'üçá']
        },
        medio: {
            'Animais': ['üê∂', 'üê±', 'üê≠', 'üêπ'],
            'Frutas': ['üçé', 'üçä', 'üçå', 'üçá'],
            'Ve√≠culos': ['üöó', 'üöï', '‚úàÔ∏è', 'üö¢']
        },
        dificil: {
            'Animais': ['üê∂', 'üê±', 'üê≠', 'üêπ'],
            'Frutas': ['üçé', 'üçä', 'üçå', 'üçá'],
            'Ve√≠culos': ['üöó', 'üöï', '‚úàÔ∏è', 'üö¢'],
            'Objetos': ['üìö', '‚úèÔ∏è', 'üíª', 'üì±']
        }
    };
    
    gameState.categories = categories[level];
    gameState.allItems = [];
    Object.values(gameState.categories).forEach(items => {
        gameState.allItems.push(...items);
    });
    gameState.allItems = gameState.allItems.sort(() => Math.random() - 0.5);
    gameState.organized = {};
    Object.keys(gameState.categories).forEach(cat => gameState.organized[cat] = []);
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">üóÇÔ∏è Organiza Tudo</h2>
            <p style="margin-bottom: 20px; color: #666;">N√≠vel: <strong>${gameState.level.toUpperCase()}</strong> | Organize os itens nas categorias corretas!</p>
            
            <div style="display: grid; grid-template-columns: repeat(${Object.keys(gameState.categories).length}, 1fr); gap: 15px; margin-bottom: 30px;">
                ${Object.keys(gameState.categories).map(cat => `
                    <div style="padding: 20px; background: #f0f0f0; border: 3px solid #1e3c72; border-radius: 10px; min-height: 200px;">
                        <h3 style="margin-bottom: 15px; color: #1e3c72;">${cat}</h3>
                        <div id="cat-${cat}" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; min-height: 100px;">
                        </div>
                    </div>
                `).join('')}
            </div>
            
            <div style="padding: 20px; background: white; border: 3px solid #1e3c72; border-radius: 10px;">
                <p style="margin-bottom: 15px; font-weight: bold;">Itens para Organizar:</p>
                <div id="itemsPool" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
                    ${gameState.allItems.map((item, i) => `
                        <button id="item-${i}" onclick="selectOrganizeItem(${i})" style="
                            padding: 15px;
                            font-size: 2.5em;
                            background: white;
                            border: 3px solid #1e3c72;
                            border-radius: 10px;
                            cursor: pointer;
                        ">${item}</button>
                    `).join('')}
                </div>
            </div>
            
            <div id="categoryButtons" style="display: none; margin-top: 20px; gap: 10px; justify-content: center;">
                ${Object.keys(gameState.categories).map(cat => `
                    <button onclick="placeInCategory('${cat}')" style="
                        padding: 15px 30px;
                        font-size: 1.1em;
                        background: #1e3c72;
                        color: white;
                        border: none;
                        border-radius: 10px;
                        cursor: pointer;
                        font-weight: bold;
                    ">${cat}</button>
                `).join('')}
            </div>
        </div>
    `;
}

function selectOrganizeItem(index) {
    gameState.selectedItem = { index: index, emoji: gameState.allItems[index] };
    document.getElementById('categoryButtons').style.display = 'flex';
    
    document.querySelectorAll('#itemsPool button').forEach(btn => {
        btn.style.background = 'white';
    });
    document.getElementById(`item-${index}`).style.background = '#ffd700';
}

function placeInCategory(category) {
    if (!gameState.selectedItem) return;
    
    const correctCategory = Object.keys(gameState.categories).find(cat => 
        gameState.categories[cat].includes(gameState.selectedItem.emoji)
    );
    
    if (category === correctCategory) {
        gameState.organized[category].push(gameState.selectedItem.emoji);
        gameState.hits++;
        gameState.score += (gameState.level === 'dificil' ? 25 : (gameState.level === 'medio' ? 15 : 10));
        
        document.getElementById(`cat-${category}`).innerHTML += `
            <span style="font-size: 2em;">${gameState.selectedItem.emoji}</span>
        `;
        
        document.getElementById(`item-${gameState.selectedItem.index}`).remove();
        
        document.getElementById('hits').textContent = gameState.hits;
        document.getElementById('score').textContent = gameState.score;
        
        if (gameState.hits === gameState.allItems.length) {
            setTimeout(() => endGame(), 500);
        }
    } else {
        gameState.errors++;
        document.getElementById('errors').textContent = gameState.errors;
    }
    
    gameState.selectedItem = null;
    document.getElementById('categoryButtons').style.display = 'none';
}

// JOGO 6: Mestre das Cartas - Flexibilidade Cognitiva
function initCardMasterGame(level) {
    const configs = {
        facil: { speed: 2500, rules: 2 },
        medio: { speed: 2000, rules: 3 },
        dificil: { speed: 1500, rules: 4 }
    };
    
    const config = configs[level];
    gameState.cardRules = [
        { name: 'COR', check: (card) => card.color === 'red', desc: 'Vermelho = SIM' },
        { name: 'N√öMERO', check: (card) => card.number % 2 === 0, desc: 'Par = SIM' },
        { name: 'NAIPE', check: (card) => card.suit === '‚ô•Ô∏è', desc: 'Cora√ß√£o = SIM' },
        { name: 'VALOR', check: (card) => card.number > 5, desc: 'Maior que 5 = SIM' }
    ];
    
    gameState.currentRule = 0;
    gameState.cardSuits = ['‚ô•Ô∏è', '‚ô¶Ô∏è', '‚ô£Ô∏è', '‚ô†Ô∏è'];
    gameState.cardColors = { '‚ô•Ô∏è': 'red', '‚ô¶Ô∏è': 'red', '‚ô£Ô∏è': 'black', '‚ô†Ô∏è': 'black' };
    
    const gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = `
        <div style="text-align: center;">
            <h2 style="color: #1e3c72; margin-bottom: 20px;">üé¥ Mestre das Cartas</h2>
            <p style="margin-bottom: 10px; color: #666;">N√≠vel: <strong>${gameState.level.toUpperCase()}</strong></p>
            
            <div style="padding: 20px; background: #ffd700; border: 3px solid #1e3c72; border-radius: 10px; margin-bottom: 20px;">
                <h3 style="margin-bottom: 5px;">REGRA ATUAL:</h3>
                <p id="currentRule" style="font-size: 1.5em; font-weight: bold;"></p>
            </div>
            
            <div id="cardDisplay" style="min-height: 250px; display: flex; align-items: center; justify-content: center; background: white; border: 4px solid #1e3c72; border-radius: 20px; margin-bottom: 20px;">
            </div>
            
            <div style="display: flex; gap: 20px; justify-content: center;">
                <button onclick="answerCard(true)" style="padding: 20px 40px; font-size: 1.3em; background: #4caf50; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold;">
                    ‚úîÔ∏è SIM
                </button>
                <button onclick="answerCard(false)" style="padding: 20px 40px; font-size: 1.3em; background: #f44336; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold;">
                    ‚ùå N√ÉO
                </button>
            </div>
        </div>
    `;
    
    generateCard();
    gameState.cardInterval = setInterval(() => {
        gameState.currentRule = (gameState.currentRule + 1) % config.rules;
        generateCard();
    }, config.speed);
}

function generateCard() {
    const suit = gameState.cardSuits[Math.floor(Math.random() * gameState.cardSuits.length)];
    const number = Math.floor(Math.random() * 10) + 1;
    const color = gameState.cardColors[suit];
    
    gameState.currentCard = { suit, number, color };
    
    const rule = gameState.cardRules[gameState.currentRule];
    document.getElementById('currentRule').textContent = rule.desc;
    
    document.getElementById('cardDisplay').innerHTML = `
        <div style="width: 150px; height: 200px; background: white; border: 4px solid black; border-radius: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 3em; color: ${color};">
            <div>${number}</div>
            <div>${suit}</div>
        </div>
    `;
}

function answerCard(answer) {
    if (!gameState.currentCard) return;
    
    const rule = gameState.cardRules[gameState.currentRule];
    const correct = rule.check(gameState.currentCard);
    
    if (answer === correct) {
        gameState.hits++;
        gameState.score += (gameState.level === 'dificil' ? 30 : (gameState.level === 'medio' ? 20 : 10));
        document.getElementById('hits').textContent = gameState.hits;
        document.getElementById('score').textContent = gameState.score;
    } else {
        gameState.errors++;
        document.getElementById('errors').textContent = gameState.errors;
    }
}

// JOGO 7: Caminho Inteligente - Navega√ß√£o Espacial
function initMazeGame(level) {
    const configs = {
        facil: { size: 5, moves: 15 },
        medio: { size: 7, moves: 25 },
        dificil: { size: 9, moves: 35 }
    };
    
    const config = configs[level];
    gameState.mazeSize = config.size;
    gameState.playerPos = { x: 0, y: 0 };
    gameState.goalPos = { x: config.size - 1, y: config.size - 1 };
    gameState.movesLeft = config.moves;
    gameState.obstacles = [];
    
    // Gerar obst√°culos aleat√≥rios
    const obstacleCount = Math.floor(config.size * config.size * 0.2);
    for (let i = 0; i < obstacleCount; i++) {
        const x = Math.floor(Math.random() * config.size);
        const y = Math.floor(Math.random() * config.size);
        if ((x !== 0 || y !== 0) && (x !== gameState.goalPos.x || y !== gameState.goalPos.y)) {
            gameState.obstacles.push({ x, y });
        }
    }
    
    renderMaze();
}

function renderMaze() {
    const gameArea = document.getElementById('gameArea');
    const cellSize = 60;
    
    let mazeHTML = '<div style="text-align: center;">';
    mazeHTML += '<h2 style="color: #1e3c72; margin-bottom: 20px;">üß≠ Caminho Inteligente</h2>';
    mazeHTML += `<p style="margin-bottom: 20px; color: #666;">N√≠vel: <strong>${gameState.level.toUpperCase()}</strong> | Movimentos: <strong id="movesLeft">${gameState.movesLeft}</strong></p>`;
    
    mazeHTML += `<div style="display: inline-block; border: 4px solid #1e3c72; border-radius: 10px; padding: 10px; background: white;">`;
    
    for (let y = 0; y < gameState.mazeSize; y++) {
        mazeHTML += '<div style="display: flex;">';
        for (let x = 0; x < gameState.mazeSize; x++) {
            let content = '';
            let bg = '#f0f0f0';
            
            if (x === gameState.playerPos.x && y === gameState.playerPos.y) {
                content = 'üë§';
                bg = '#90ee90';
            } else if (x === gameState.goalPos.x && y === gameState.goalPos.y) {
                content = 'üéØ';
                bg = '#ffd700';
            } else if (gameState.obstacles.some(obs => obs.x === x && obs.y === y)) {
                content = 'üß±';
                bg = '#ff6b6b';
            }
            
            mazeHTML += `<div style="width: ${cellSize}px; height: ${cellSize}px; border: 2px solid #ccc; display: flex; align-items: center; justify-content: center; font-size: 2em; background: ${bg};">${content}</div>`;
        }
        mazeHTML += '</div>';
    }
    
    mazeHTML += '</div>';
    
    mazeHTML += `
        <div style="margin-top: 20px; display: grid; grid-template-columns: repeat(3, 80px); gap: 10px; justify-content: center;">
            <div></div>
            <button onclick="moveMaze('up')" style="padding: 15px; font-size: 1.5em; background: #1e3c72; color: white; border: none; border-radius: 10px; cursor: pointer;">‚¨ÜÔ∏è</button>
            <div></div>
            <button onclick="moveMaze('left')" style="padding: 15px; font-size: 1.5em; background: #1e3c72; color: white; border: none; border-radius: 10px; cursor: pointer;">‚¨ÖÔ∏è</button>
            <div></div>
            <button onclick="moveMaze('right')" style="padding: 15px; font-size: 1.5em; background: #1e3c72; color: white; border: none; border-radius: 10px; cursor: pointer;">‚û°Ô∏è</button>
            <div></div>
            <button onclick="moveMaze('down')" style="padding: 15px; font-size: 1.5em; background: #1e3c72; color: white; border: none; border-radius: 10px; cursor: pointer;">‚¨áÔ∏è</button>
            <div></div>
        </div>
    `;
    
    mazeHTML += '</div>';
    gameArea.innerHTML = mazeHTML;
}

function moveMaze(direction) {
    let newX = gameState.playerPos.x;
    let newY = gameState.playerPos.y;
    
    if (direction === 'up') newY--;
    if (direction === 'down') newY++;
    if (direction === 'left') newX--;
    if (direction === 'right') newX++;
    
    // Verificar limites
    if (newX < 0 || newX >= gameState.mazeSize || newY < 0 || newY >= gameState.mazeSize) {
        gameState.errors++;
        document.getElementById('errors').textContent = gameState.errors;
        return;
    }
    
    // Verificar obst√°culos
    if (gameState.obstacles.some(obs => obs.x === newX && obs.y === newY)) {
        gameState.errors++;
        document.getElementById('errors').textContent = gameState.errors;
        return;
    }
    
    // Movimento v√°lido
    gameState.playerPos = { x: newX, y: newY };
    gameState.movesLeft--;
    
    // Verificar vit√≥ria
    if (newX === gameState.goalPos.x && newY === gameState.goalPos.y) {
        gameState.hits += 10;
        gameState.score += (gameState.level === 'dificil' ? 100 : (gameState.level === 'medio' ? 75 : 50));
        document.getElementById('hits').textContent = gameState.hits;
        document.getElementById('score').textContent = gameState.score;
        setTimeout(() => endGame(), 500);
        return;
    }
    
    // Verificar se acabaram os movimentos
    if (gameState.movesLeft <= 0) {
        setTimeout(() => endGame(), 500);
        return;
    }
    
    renderMaze();
}
    
    // Landing Page Navigation
    function enterApp() {
        document.getElementById('landingPage').classList.add('hidden');
        document.getElementById('appWrapper').classList.add('active');
        showLGPDBanner();
    }
    
    function backToLanding() {
        document.getElementById('landingPage').classList.remove('hidden');
        document.getElementById('appWrapper').classList.remove('active');
    }
    
    // Stripe Payment Integration (placeholder)
    function selectPlan(planId) {
        localStorage.setItem('selectedPlan', planId);
        alert('Plano selecionado: ' + planId + '\n\nAp√≥s o cadastro, voc√™ ser√° direcionado para o pagamento seguro via Stripe.');
        // TODO: Integrar com Stripe Checkout
        // window.location.href = 'https://checkout.stripe.com/pay/...';
    }
    
    </script>

</div><!-- Fecha app-wrapper -->

</body>
</html>
